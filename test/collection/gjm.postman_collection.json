{
	"info": {
		"_postman_id": "6eff4b0c-be2d-44c3-8009-80b54ec3fd5d",
		"name": "gjm",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "appointments",
			"item": [
				{
					"name": "get",
					"item": [
						{
							"name": "filter",
							"item": [
								{
									"name": "get appointments - success - filter (after)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const appointmentSchema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema({\r",
													"        \"type\": \"array\",\r",
													"        \"items\": appointmentSchema\r",
													"    });\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData[0].title).to.eql(\"test-getappointments-filter-title-2\");\r",
													"    pm.expect(jsonData[1].title).to.eql(\"test-getappointments-filter-title-1\");\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments?after=2021-05-03T08:05:24.000Z",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											],
											"query": [
												{
													"key": "after",
													"value": "2021-05-03T08:05:24.000Z"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get appointments - success - filter (after)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const appointmentSchema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema({\r",
													"        \"type\": \"array\",\r",
													"        \"items\": appointmentSchema\r",
													"    });\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData[0].title).to.eql(\"test-getappointments-filter-title-8\");\r",
													"    pm.expect(jsonData[1].title).to.eql(\"test-getappointments-filter-title-7\");\r",
													"    pm.expect(jsonData[2].title).to.eql(\"test-getappointments-filter-title-6\");\r",
													"    pm.expect(jsonData[3].title).to.eql(\"test-getappointments-filter-title-5\");\r",
													"    pm.expect(jsonData[4].title).to.eql(\"test-getappointments-filter-title-4\");\r",
													"    pm.expect(jsonData[5].title).to.eql(\"test-getappointments-filter-title-3\");\r",
													"    pm.expect(jsonData[6].title).to.eql(\"test-getappointments-filter-title-2\");\r",
													"    pm.expect(jsonData[7].title).to.eql(\"test-getappointments-filter-title-1\");\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments?after=2021-05-09T08:05:24.000Z",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											],
											"query": [
												{
													"key": "after",
													"value": "2021-05-09T08:05:24.000Z"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get appointments - failure - filter (after)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_filter_after\", \"assadsda\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 422\", function () {\r",
													"    pm.response.to.have.status(422);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INVALID_PARAMETERS\",\r",
													"        \"message\": \"Given parameters can not be processed\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"after\",\r",
													"            \"in\": \"query\",\r",
													"            \"value\": pm.variables.get(\"appointment_filter_after\"),\r",
													"            \"message\": \"The provided Date can not be parsed\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments?after={{appointment_filter_after}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											],
											"query": [
												{
													"key": "after",
													"value": "{{appointment_filter_after}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get appointments - success - filter (before)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const appointmentSchema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema({\r",
													"        \"type\": \"array\",\r",
													"        \"items\": appointmentSchema\r",
													"    });\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData[0].title).to.eql(\"test-getappointments-filter-title-10\");\r",
													"    pm.expect(jsonData[1].title).to.eql(\"test-getappointments-filter-title-9\");\r",
													"    pm.expect(jsonData[2].title).to.eql(\"test-getappointments-filter-title-8\");\r",
													"    pm.expect(jsonData[3].title).to.eql(\"test-getappointments-filter-title-7\");\r",
													"    pm.expect(jsonData[4].title).to.eql(\"test-getappointments-filter-title-6\");\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments?before=2021-05-05T08:05:24.000Z",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											],
											"query": [
												{
													"key": "before",
													"value": "2021-05-05T08:05:24.000Z"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get appointments - success - filter (before)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const appointmentSchema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema({\r",
													"        \"type\": \"array\",\r",
													"        \"items\": appointmentSchema\r",
													"    });\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData[0].title).to.eql(\"test-getappointments-filter-title-10\");\r",
													"    pm.expect(jsonData[1].title).to.eql(\"test-getappointments-filter-title-9\");\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments?before=2021-05-08T08:05:24.000Z",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											],
											"query": [
												{
													"key": "before",
													"value": "2021-05-08T08:05:24.000Z"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get appointments - failure - filter (before)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_filter_before\", \"assadsda\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 422\", function () {\r",
													"    pm.response.to.have.status(422);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INVALID_PARAMETERS\",\r",
													"        \"message\": \"Given parameters can not be processed\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"before\",\r",
													"            \"in\": \"query\",\r",
													"            \"value\": pm.variables.get(\"appointment_filter_before\"),\r",
													"            \"message\": \"The provided Date can not be parsed\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments?before={{appointment_filter_before}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											],
											"query": [
												{
													"key": "before",
													"value": "{{appointment_filter_before}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get appointments - success - filter (before)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const appointmentSchema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema({\r",
													"        \"type\": \"array\",\r",
													"        \"items\": appointmentSchema\r",
													"    });\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData[0].title).to.eql(\"test-getappointments-filter-title-10\");\r",
													"    pm.expect(jsonData[1].title).to.eql(\"test-getappointments-filter-title-9\");\r",
													"    pm.expect(jsonData[2].title).to.eql(\"test-getappointments-filter-title-8\");\r",
													"    pm.expect(jsonData[3].title).to.eql(\"test-getappointments-filter-title-7\");\r",
													"    pm.expect(jsonData[4].title).to.eql(\"test-getappointments-filter-title-6\");\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments?limit=5",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											],
											"query": [
												{
													"key": "limit",
													"value": "5"
												}
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "bearer",
								"bearer": [
									{
										"key": "token",
										"value": "{{bearer_getappointments_filter}}",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const username = pm.environment.get(\"keycloak_username_getappointments_filter\");",
											"const password = pm.environment.get(\"keycloak_password_getappointments_filter\");",
											"",
											"const tokenVariableName = 'bearer_getappointments_filter';",
											"const tokenExpriyDateVariableName = 'bearer_getappointments_filter_expiry_date';",
											"",
											"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
											"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "get appointments (creator, admin, enrollmentCreator, enrollmentPermission, pin as user, pin with link)",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.expect(pm.response.code).to.equal(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Valid schema\", () => {\r",
											"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
											"    const appointmentSchema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
											"\r",
											"    pm.response.to.have.jsonSchema({\r",
											"        \"type\": \"array\",\r",
											"        \"items\": appointmentSchema\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    const jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData[0].relations).lengthOf(1);\r",
											"    pm.expect(jsonData[0].relations[0]).to.eql(\"PINNED\");\r",
											"    pm.expect(jsonData[1].relations).lengthOf(1);\r",
											"    pm.expect(jsonData[1].relations[0]).to.eql(\"PINNED\");\r",
											"    pm.expect(jsonData[2].relations).lengthOf(1);\r",
											"    pm.expect(jsonData[2].relations[0]).to.eql(\"ENROLLED\");\r",
											"    pm.expect(jsonData[3].relations).lengthOf(1);\r",
											"    pm.expect(jsonData[3].relations[0]).to.eql(\"ENROLLED\");\r",
											"    pm.expect(jsonData[4].relations).lengthOf(1);\r",
											"    pm.expect(jsonData[4].relations[0]).to.eql(\"ADMIN\");\r",
											"    pm.expect(jsonData[5].relations).lengthOf(1);\r",
											"    pm.expect(jsonData[5].relations[0]).to.eql(\"CREATOR\");\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/appointments?pin1=test-getappointments-default-pin-link-link&perm1=4bc8aa7c-6cc8-4811-b672-2bd6601254aa&token1=a4a06bcd38b56c027015b00284c7b5a394467215afbc51936f8b6026776acb80",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"appointments"
									],
									"query": [
										{
											"key": "pin1",
											"value": "test-getappointments-default-pin-link-link"
										},
										{
											"key": "perm1",
											"value": "4bc8aa7c-6cc8-4811-b672-2bd6601254aa"
										},
										{
											"key": "token1",
											"value": "a4a06bcd38b56c027015b00284c7b5a394467215afbc51936f8b6026776acb80"
										}
									]
								}
							},
							"response": []
						}
					],
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{bearer_getappointments}}",
								"type": "string"
							}
						]
					},
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"const username = pm.environment.get(\"keycloak_username_getappointments\");",
									"const password = pm.environment.get(\"keycloak_password_getappointments\");",
									"",
									"const tokenVariableName = 'bearer_getappointments';",
									"const tokenExpriyDateVariableName = 'bearer_getappointments_expiry_date';",
									"",
									"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
									"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "create",
					"item": [
						{
							"name": "main",
							"item": [
								{
									"name": "create Appointment - success - minimalist",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_title\", pm.variables.get(\"appointment_creation_title\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location\", pm.variables.get(\"appointment_creation_location\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_description\", pm.variables.get(\"appointment_creation_description\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_date\", pm.variables.get(\"appointment_creation_date\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_deadline\", pm.variables.get(\"appointment_creation_deadline\"));\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment  - minimalist",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    var date_unix_orig = Date.parse(jsonData.date);\r",
													"    var date_final_orig = moment(date_unix_orig).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
													"\r",
													"    var date_unix = Date.parse(pm.collectionVariables.get(\"VALIDATION_appointment_creation_date\"));\r",
													"    var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
													"\r",
													"    var deadline_unix_orig = Date.parse(jsonData.deadline);\r",
													"    var deadline_final_orig = moment(deadline_unix_orig).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
													"\r",
													"    var deadline_unix = Date.parse(pm.collectionVariables.get(\"VALIDATION_appointment_creation_deadline\"));\r",
													"    var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"    pm.expect(jsonData.title).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_title\"));\r",
													"    pm.expect(jsonData.description).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_description\"));\r",
													"    pm.expect(jsonData.location).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_location\"));\r",
													"    pm.expect(date_final_orig).to.eql(date_final);\r",
													"    pm.expect(deadline_final_orig).to.eql(deadline_final);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - minimalist - optional defaults",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.hidden).to.eql(false);\r",
													"    pm.expect(jsonData.driverAddition).to.eql(false);\r",
													"\r",
													"    pm.expect(jsonData).to.not.have.property('additions');\r",
													"    pm.expect(jsonData).to.not.have.property('files');\r",
													"    pm.expect(jsonData).to.not.have.property('administrators');\r",
													"    pm.expect(jsonData).to.not.have.property('enrollments');\r",
													"\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Appointment - success - optionals",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);\r",
													"\r",
													"pm.variables.set(\"appointment_creation_hidden\", true);\r",
													"pm.variables.set(\"appointment_creation_driverAddition\", true);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_driverAddition\", pm.variables.get(\"appointment_creation_driverAddition\"));\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\",\r\n    \"hidden\": \"{{appointment_creation_hidden}}\",\r\n    \"driverAddition\": \"{{appointment_creation_driverAddition}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - optionals defaults",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"\r",
													"    pm.expect(jsonData.driverAddition).to.eql(pm.variables.get(\"VALIDATION_appointment_creation_driverAddition\"));\r",
													"\r",
													"    pm.expect(jsonData).to.not.have.property('additions');\r",
													"    pm.expect(jsonData).to.not.have.property('files');\r",
													"    pm.expect(jsonData).to.not.have.property('administrators');\r",
													"    pm.expect(jsonData).to.not.have.property('enrollments');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "link",
							"item": [
								{
									"name": "create Appointment - success - link - no link",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - link - no link",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Appointment - success - link - custom link",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_link\", \"test-POSTMAN-createappointment-link-\" +  pm.globals.replaceIn('{{$randomPassword}}'));\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Link has set value\", function () {\r",
													"    pm.expect(jsonData.link).to.equal(pm.variables.get(\"appointment_creation_link\"));\r",
													"});\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"link\": \"{{appointment_creation_link}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - link - custom link",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Appointment - failure - link - in use",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_creation_link\", 'test-createappointment-existinglink-link');\r",
													"\r",
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Failed POST request\", function () {\r",
													"    pm.response.to.have.status(409);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"DUPLICATE_VALUES\",\r",
													"        \"message\": \"Provided values are already in use\",\r",
													"        \"data\": [\r",
													"            {\r",
													"                \"attribute\": \"link\",\r",
													"                \"value\": pm.variables.get(\"appointment_creation_link\"),\r",
													"                \"message\": \"Value is already in use by other appointment. Specify a different link\"\r",
													"            }\r",
													"        ]\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"link\": \"{{appointment_creation_link}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "date",
							"item": [
								{
									"name": "create Appointment - failure - date - invalid date - date < deadline",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Failed POST request\", function () {\r",
													"    pm.response.to.have.status(422);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INVALID_VALUES\",\r",
													"        \"message\": \"Given values can not be processed\",\r",
													"        \"data\": [\r",
													"            {\r",
													"                \"attribute\": \"deadline\",\r",
													"                \"value\": pm.variables.get(\"appointment_creation_deadline\"),\r",
													"                \"message\": \"The specified deadline is timed after the date\"\r",
													"            }\r",
													"        ]\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "additions",
							"item": [
								{
									"name": "create Appointment - success - additions",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);\r",
													"\r",
													"pm.variables.set(\"appointment_creation_addition_1_name\",  \"test-POSTMAN-createappointment-addition-1-name\");\r",
													"pm.variables.set(\"appointment_creation_addition_2_name\",  \"test-POSTMAN-createappointment-addition-2-name\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_addition_1_name\", pm.variables.get('appointment_creation_addition_1_name'));\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_addition_2_name\", pm.variables.get('appointment_creation_addition_2_name'));"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\",\r\n    \"additions\": [{\r\n        \"name\": \"{{appointment_creation_addition_1_name}}\"\r\n    },{\r\n        \"name\": \"{{appointment_creation_addition_2_name}}\"\r\n    }]\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - additions",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"\r",
													"    pm.expect(jsonData.additions).to.have.lengthOf(2);\r",
													"    pm.expect(jsonData.additions[0].name).to.eql(pm.collectionVariables.get('VALIDATION_appointment_creation_addition_1_name'));\r",
													"    pm.expect(jsonData.additions[1].name).to.eql(pm.collectionVariables.get('VALIDATION_appointment_creation_addition_2_name'));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Appointment - failure - additions - duplicate names",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);\r",
													"pm.variables.set(\"appointment_creation_driverAddition\",  false);\r",
													"\r",
													"pm.variables.set(\"appointment_creation_addition_1_name\",  \"test-POSTMAN-createappointment-addition-1-name\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Failed GET request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"DUPLICATE_ENTRY\",\r",
													"        \"message\": \"Following values are duplicates and can not be used\",\r",
													"        \"data\": [\r",
													"            {\r",
													"                \"object\": \"addition\",\r",
													"                \"attribute\": \"name\",\r",
													"                \"value\": pm.variables.get(\"appointment_creation_addition_1_name\"),\r",
													"                \"in\": \"body\"\r",
													"            }\r",
													"        ]\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\",\r\n    \"additions\": [{\r\n        \"name\": \"{{appointment_creation_addition_1_name}}\"\r\n    }, {\r\n        \"name\": \"{{appointment_creation_addition_1_name}}\"\r\n    }]\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "maxEnrollments",
							"item": [
								{
									"name": "create Appointment - success - maxEnrollments",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\",\r\n    \"maxEnrollments\": \"{{appointment_creation_maxEnrollments}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - maxEnrollments",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"});\r",
													"\r",
													"pm.test(\"MaxEnrollments missing\", () => {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.not.have.property(\"maxEnrollments\");\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Appointment - success - maxEnrollments - neg. to null",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);\r",
													"\r",
													"pm.variables.set(\"appointment_creation_maxEnrollments\",  -1);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\",\r\n    \"maxEnrollments\": \"{{appointment_creation_maxEnrollments}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - maxEnrollments - neg. to null",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"});\r",
													"\r",
													"pm.test(\"MaxEnrollments missing\", () => {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.not.have.property(\"maxEnrollments\");\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Appointment - success - maxEnrollments - 0 to null",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"appointment_creation_title\", pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"appointment_creation_description\", pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"appointment_creation_location\",  pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);\r",
													"\r",
													"pm.variables.set(\"appointment_creation_maxEnrollments\",  0);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_id\", jsonData.id);\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_creation_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\",\r\n    \"maxEnrollments\": \"{{appointment_creation_maxEnrollments}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get created appointment - maxEnrollments - 0 to null",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_id\"));\r",
													"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_creation_link\"));\r",
													"});\r",
													"\r",
													"pm.test(\"MaxEnrollments missing\", () => {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.not.have.property(\"maxEnrollments\");\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{VALIDATION_appointment_creation_location_header}}",
											"host": [
												"{{VALIDATION_appointment_creation_location_header}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "PROTECTION CHECK - create Appointment",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const moment = require('moment');\r",
											"\r",
											"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
											"var date_unix = Date.parse(date);\r",
											"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
											"\r",
											"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
											"var deadline_unix = Date.parse(deadline);\r",
											"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
											"\r",
											"pm.variables.set(\"appointment_creation_title\", \"test-POSTMAN-createappointment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
											"pm.variables.set(\"appointment_creation_description\", \"test-POSTMAN-createappointment-description-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
											"pm.variables.set(\"appointment_creation_location\",  \"test-POSTMAN-createappointment-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
											"pm.variables.set(\"appointment_creation_date\",  date_final);\r",
											"pm.variables.set(\"appointment_creation_deadline\",  deadline_final);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.eql({\r",
											"        \"statusCode\": 401,\r",
											"        \"message\": \"Missing or invalid Authorization header\",\r",
											"        \"error\": \"Unauthorized\"\r",
											"    });\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"title\": \"{{appointment_creation_title}}\",\r\n    \"description\": \"{{appointment_creation_description}}\",\r\n    \"location\": \"{{appointment_creation_location}}\",\r\n    \"date\": \"{{appointment_creation_date}}\",\r\n    \"deadline\": \"{{appointment_creation_deadline}}\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/appointments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"appointments"
									]
								}
							},
							"response": []
						}
					],
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{bearer_createappointment}}",
								"type": "string"
							}
						]
					},
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"const username = pm.environment.get(\"keycloak_username_createappointment\");",
									"const password = pm.environment.get(\"keycloak_password_createappointment\");",
									"",
									"const tokenVariableName = 'bearer_createappointment';",
									"const tokenExpriyDateVariableName = 'bearer_createappointment_expiry_date';",
									"",
									"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
									"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "{link}",
					"item": [
						{
							"name": "get",
							"item": [
								{
									"name": "main",
									"item": [
										{
											"name": "creator",
											"item": [
												{
													"name": "get appointment by link - success - default - auth",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"relations\": [\r",
																	"            \"CREATOR\"\r",
																	"        ],\r",
																	"        \"id\": \"5163f213-c168-408c-ad63-4faa7ec61ae5\",\r",
																	"        \"title\": \"test-getappointment-default-title\",\r",
																	"        \"description\": \"test-getappointment-default-description\",\r",
																	"        \"link\": \"test-getappointment-default-link\",\r",
																	"        \"location\": \"test-getappointment-default-location\",\r",
																	"        \"date\": \"2021-03-01T09:05:23.000Z\",\r",
																	"        \"deadline\": \"2021-01-01T19:05:23.000Z\",\r",
																	"        \"hidden\": false,\r",
																	"        \"driverAddition\": false,\r",
																	"        \"iat\": \"2021-03-14T19:05:23.000Z\",\r",
																	"        \"lud\": \"2021-03-14T19:05:23.000Z\",\r",
																	"        \"creator\": {\r",
																	"            \"name\": \"GJM-TestUser GetAppointment\",\r",
																	"            \"username\": \"gjm-test-getappointment-user\"\r",
																	"        }\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"get_appointment_link\", \"test-getappointment-default-link\")"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{get_appointment_link}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "no creator",
											"item": [
												{
													"name": "get appointment by link - success - default - admin",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.not.have.property(\"iat\");\r",
																	"    pm.expect(jsonData).to.not.have.property(\"lud\");\r",
																	"});"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"get_appointment_link\", \"test-getappointment-default-link\")\r",
																	"\r",
																	"const username = pm.environment.get(\"keycloak_username_getappointment-admin\");\r",
																	"const password = pm.environment.get(\"keycloak_password_getappointment-admin\");\r",
																	"\r",
																	"const tokenVariableName = 'bearer_getappointment-admin';\r",
																	"const tokenExpriyDateVariableName = 'bearer_getappointment-admin_expiry_date';\r",
																	"\r",
																	"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
																	"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "bearer",
															"bearer": [
																{
																	"key": "token",
																	"value": "{{bearer_getappointment-admin}}",
																	"type": "string"
																}
															]
														},
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{get_appointment_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "get appointment by link - success - default - no auth",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.not.have.property(\"iat\");\r",
																	"    pm.expect(jsonData).to.not.have.property(\"lud\");\r",
																	"});"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"get_appointment_link\", \"test-getappointment-default-link\")"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "noauth"
														},
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{get_appointment_link}}"
															]
														}
													},
													"response": []
												}
											],
											"auth": {
												"type": "noauth"
											},
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"type": "text/javascript",
														"exec": [
															""
														]
													}
												},
												{
													"listen": "test",
													"script": {
														"type": "text/javascript",
														"exec": [
															""
														]
													}
												}
											]
										},
										{
											"name": "__slim",
											"item": []
										},
										{
											"name": "get appointment by link - failure 404",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Failed GET request\", function () {\r",
															"    pm.response.to.have.status(404);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"NOT_FOUND\",\r",
															"        \"message\": \"Requested resource could not be located\",\r",
															"        \"data\": {\r",
															"            \"attribute\": \"link\",\r",
															"            \"in\": \"path\",\r",
															"            \"value\": pm.variables.get(\"get_appointment_link\"),\r",
															"            \"message\": \"Specified appointment does not exist\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"INVALID_LINK\")"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "references",
									"item": [
										{
											"name": "get appointment by link - success - relations (appointment creator)",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.relations).to.eql([\"CREATOR\"]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-relations-link\")"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "get appointment by link - success - relations (appointment admin)",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.relations).to.eql([\"ADMIN\"]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-relations-admin-link\")\r",
															"\r",
															"const username = pm.environment.get(\"keycloak_username_getappointment-admin\");\r",
															"const password = pm.environment.get(\"keycloak_password_getappointment-admin\");\r",
															"\r",
															"const tokenVariableName = 'bearer_getappointment-admin';\r",
															"const tokenExpriyDateVariableName = 'bearer_getappointment-admin_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_getappointment-admin}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "get appointment by link - success - relations (enrolled - as enrollment creator)",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.relations).to.eql([\"ENROLLED\"]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-relations-enrolled-link\")\r",
															"\r",
															"const username = pm.environment.get(\"keycloak_username_getappointment-enrollmentcreator\");\r",
															"const password = pm.environment.get(\"keycloak_password_getappointment-enrollmentcreator\");\r",
															"\r",
															"const tokenVariableName = 'bearer_getappointment-enrollmentcreator';\r",
															"const tokenExpriyDateVariableName = 'bearer_getappointment-enrollmentcreator_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_getappointment-enrollmentcreator}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "get appointment by link - success - relations (enrolled - token permission)",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.relations).to.eql([\"ENROLLED\"]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-relations-enrolled-link\")\r",
															"\r",
															"const username = pm.environment.get(\"keycloak_username_getappointment-enrollmentcreator\");\r",
															"const password = pm.environment.get(\"keycloak_password_getappointment-enrollmentcreator\");\r",
															"\r",
															"const tokenVariableName = 'bearer_getappointment-enrollmentcreator';\r",
															"const tokenExpriyDateVariableName = 'bearer_getappointment-enrollmentcreator_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}?perm1=fa002311-fa84-45dd-8b4a-fed641affb91&token1=8e5ed8bdb47c06d14e11736066b7517c91c36a19daf5d4951ddde281a13a12c4",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													],
													"query": [
														{
															"key": "perm1",
															"value": "fa002311-fa84-45dd-8b4a-fed641affb91"
														},
														{
															"key": "token1",
															"value": "8e5ed8bdb47c06d14e11736066b7517c91c36a19daf5d4951ddde281a13a12c4"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "get appointment by link - success - relations (pinned)",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.relations).to.eql([\"PINNED\"]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-relations-pinned-link\")\r",
															"\r",
															"const username = pm.environment.get(\"keycloak_username_getappointment-pinner\");\r",
															"const password = pm.environment.get(\"keycloak_password_getappointment-pinner\");\r",
															"\r",
															"const tokenVariableName = 'bearer_getappointment-pinner';\r",
															"const tokenExpriyDateVariableName = 'bearer_getappointment-pinner_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_getappointment-pinner}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "administrators",
									"item": [
										{
											"name": "get appointment by link - success - administrators",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.administrators).to.eql([\r",
															"        {\r",
															"            \"name\": \"GJM-TestUser GetAppointment-Admin\",\r",
															"            \"username\": \"gjm-test-getappointment-admin-user\"\r",
															"        }\r",
															"    ]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-administrators-link\")"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "additions",
									"item": [
										{
											"name": "get appointment by link - success - additions",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.additions).to.eql([\r",
															"        {\r",
															"            \"id\": \"28a03edc-cde5-4ce3-bb4c-04dcbe85f116\",\r",
															"            \"name\": \"test-getappointment-additions-name-1\",\r",
															"            \"order\": 0\r",
															"        },\r",
															"        {\r",
															"            \"id\": \"74b5eae6-1e5f-47eb-bf46-57f292f56e44\",\r",
															"            \"name\": \"test-getappointment-additions-name-2\",\r",
															"            \"order\": 1\r",
															"        },\r",
															"        {\r",
															"            \"id\": \"16a7edc6-c403-446f-89a1-f1a1d61f9ec9\",\r",
															"            \"name\": \"test-getappointment-additions-name-3\",\r",
															"            \"order\": 2\r",
															"        },\r",
															"        {\r",
															"            \"id\": \"ee59654b-b6cf-4ea2-81a2-8d097a54bd44\",\r",
															"            \"name\": \"test-getappointment-additions-name-4\",\r",
															"            \"order\": 3\r",
															"        }\r",
															"    ]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-additions-link\")"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "enrollments",
									"item": [
										{
											"name": "auth",
											"item": [
												{
													"name": "get appointment by link - success - enrollments - auth",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData.enrollments).to.eql([\r",
																	"        {\r",
																	"            \"id\": \"14bba460-69d8-4238-8d79-5e2106d2998e\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-2\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-2\",\r",
																	"            \"iat\": \"2021-01-01T04:06:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"33d5cc7c-7278-4ce5-bd1d-d5a527e315c8\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-4\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-4\",\r",
																	"            \"iat\": \"2021-01-01T04:08:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"77fd09fb-f44b-4646-9e47-e45a0e8d7fc1\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-3\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-3\",\r",
																	"            \"iat\": \"2021-01-01T04:07:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"7e826bb0-0008-4503-86fa-7ea9f10525d1\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-5-creator\",\r",
																	"            \"iat\": \"2021-01-01T04:09:23.000Z\",\r",
																	"            \"creator\": {\r",
																	"                \"name\": \"GJM-TestUser GetAppointment-EnrollmentCreator\",\r",
																	"                \"username\": \"gjm-test-getappointment-enrollmentcreator-user\"\r",
																	"            }\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"b1bc5530-c9cc-40c1-9280-cf99ec6cc63d\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-1\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-1\",\r",
																	"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																	"        }\r",
																	"    ]);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-link\")"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{get_appointment_link}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "no auth",
											"item": [
												{
													"name": "get appointment by link - success - enrollments - no auth",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData.enrollments).to.eql([\r",
																	"        {\r",
																	"            \"id\": \"14bba460-69d8-4238-8d79-5e2106d2998e\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-2\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-2\",\r",
																	"            \"iat\": \"2021-01-01T04:06:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"33d5cc7c-7278-4ce5-bd1d-d5a527e315c8\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-4\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-4\",\r",
																	"            \"iat\": \"2021-01-01T04:08:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"77fd09fb-f44b-4646-9e47-e45a0e8d7fc1\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-3\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-3\",\r",
																	"            \"iat\": \"2021-01-01T04:07:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"7e826bb0-0008-4503-86fa-7ea9f10525d1\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-5-creator\",\r",
																	"            \"iat\": \"2021-01-01T04:09:23.000Z\",\r",
																	"            \"creator\": {\r",
																	"                \"name\": \"GJM-TestUser GetAppointment-EnrollmentCreator\",\r",
																	"                \"username\": \"gjm-test-getappointment-enrollmentcreator-user\"\r",
																	"            }\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"b1bc5530-c9cc-40c1-9280-cf99ec6cc63d\",\r",
																	"            \"name\": \"test-getappointment-enrollments-name-1\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-comment-1\",\r",
																	"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																	"        }\r",
																	"    ]);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-link\")"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"auth": {
															"type": "noauth"
														},
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{get_appointment_link}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "hidden",
											"item": [
												{
													"name": "auth",
													"item": [
														{
															"name": "get appointment by link - success - enrollments (hidden) - auth (creator)",
															"event": [
																{
																	"listen": "test",
																	"script": {
																		"exec": [
																			"pm.test(\"Status code is 200\", function () {\r",
																			"    pm.expect(pm.response.code).to.equal(200);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Valid schema\", () => {\r",
																			"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																			"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																			"\r",
																			"    pm.response.to.have.jsonSchema(schema);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Correct JSON response data\", function () {\r",
																			"    const jsonData = pm.response.json();\r",
																			"\r",
																			"    pm.expect(jsonData.hidden).to.eql(true);\r",
																			"\r",
																			"    pm.expect(jsonData.enrollments).to.eql([\r",
																			"        {\r",
																			"            \"id\": \"1de9808d-b203-40c3-b6c3-184dd58bfa48\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-5-creator\",\r",
																			"            \"iat\": \"2021-01-01T04:09:23.000Z\",\r",
																			"            \"creator\": {\r",
																			"                \"name\": \"GJM-TestUser GetAppointment-EnrollmentCreator\",\r",
																			"                \"username\": \"gjm-test-getappointment-enrollmentcreator-user\"\r",
																			"            }\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"76975e00-00d2-4b38-b300-4f30d7c2d9de\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-1\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-1\",\r",
																			"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"b31c6c83-c4b3-4526-a94b-703f837be105\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-4\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-4\",\r",
																			"            \"iat\": \"2021-01-01T04:08:23.000Z\"\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"d07dcb9c-27cd-436d-88b5-3a1bd6253d11\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-3\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-3\",\r",
																			"            \"iat\": \"2021-01-01T04:07:23.000Z\"\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"e0d6c93e-87d9-41c5-b4f5-e53e50b66acd\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-2\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-2\",\r",
																			"            \"iat\": \"2021-01-01T04:06:23.000Z\"\r",
																			"        }\r",
																			"    ]);\r",
																			"});"
																		],
																		"type": "text/javascript"
																	}
																},
																{
																	"listen": "prerequest",
																	"script": {
																		"exec": [
																			"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																		],
																		"type": "text/javascript"
																	}
																}
															],
															"request": {
																"method": "GET",
																"header": [],
																"url": {
																	"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
																	"host": [
																		"{{baseUrl}}"
																	],
																	"path": [
																		"appointments",
																		"{{get_appointment_link}}"
																	]
																}
															},
															"response": []
														},
														{
															"name": "get appointment by link - success - enrollments (hidden) - auth (admin)",
															"event": [
																{
																	"listen": "test",
																	"script": {
																		"exec": [
																			"pm.test(\"Status code is 200\", function () {\r",
																			"    pm.expect(pm.response.code).to.equal(200);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Valid schema\", () => {\r",
																			"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																			"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																			"\r",
																			"    pm.response.to.have.jsonSchema(schema);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Correct JSON response data\", function () {\r",
																			"    const jsonData = pm.response.json();\r",
																			"\r",
																			"    pm.expect(jsonData.hidden).to.eql(true);\r",
																			"\r",
																			"    pm.expect(jsonData.enrollments).to.eql([\r",
																			"        {\r",
																			"            \"id\": \"1de9808d-b203-40c3-b6c3-184dd58bfa48\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-5-creator\",\r",
																			"            \"iat\": \"2021-01-01T04:09:23.000Z\",\r",
																			"            \"creator\": {\r",
																			"                \"name\": \"GJM-TestUser GetAppointment-EnrollmentCreator\",\r",
																			"                \"username\": \"gjm-test-getappointment-enrollmentcreator-user\"\r",
																			"            }\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"76975e00-00d2-4b38-b300-4f30d7c2d9de\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-1\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-1\",\r",
																			"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"b31c6c83-c4b3-4526-a94b-703f837be105\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-4\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-4\",\r",
																			"            \"iat\": \"2021-01-01T04:08:23.000Z\"\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"d07dcb9c-27cd-436d-88b5-3a1bd6253d11\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-3\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-3\",\r",
																			"            \"iat\": \"2021-01-01T04:07:23.000Z\"\r",
																			"        },\r",
																			"        {\r",
																			"            \"id\": \"e0d6c93e-87d9-41c5-b4f5-e53e50b66acd\",\r",
																			"            \"name\": \"test-getappointment-enrollments-hidden-name-2\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-2\",\r",
																			"            \"iat\": \"2021-01-01T04:06:23.000Z\"\r",
																			"        }\r",
																			"    ]);\r",
																			"});"
																		],
																		"type": "text/javascript"
																	}
																},
																{
																	"listen": "prerequest",
																	"script": {
																		"exec": [
																			"const username = pm.environment.get(\"keycloak_username_getappointment-admin\");\r",
																			"const password = pm.environment.get(\"keycloak_password_getappointment-admin\");\r",
																			"\r",
																			"const tokenVariableName = 'bearer_getappointment-admin';\r",
																			"const tokenExpriyDateVariableName = 'bearer_getappointment-admin_expiry_date';\r",
																			"\r",
																			"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
																			"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);\r",
																			"\r",
																			"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																		],
																		"type": "text/javascript"
																	}
																}
															],
															"request": {
																"auth": {
																	"type": "bearer",
																	"bearer": [
																		{
																			"key": "token",
																			"value": "{{bearer_getappointment-admin}}",
																			"type": "string"
																		}
																	]
																},
																"method": "GET",
																"header": [],
																"url": {
																	"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
																	"host": [
																		"{{baseUrl}}"
																	],
																	"path": [
																		"appointments",
																		"{{get_appointment_link}}"
																	]
																}
															},
															"response": []
														},
														{
															"name": "get appointment by link - success - enrollments (hidden) - auth (enrollment creator)",
															"event": [
																{
																	"listen": "test",
																	"script": {
																		"exec": [
																			"pm.test(\"Status code is 200\", function () {\r",
																			"    pm.expect(pm.response.code).to.equal(200);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Valid schema\", () => {\r",
																			"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																			"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																			"\r",
																			"    pm.response.to.have.jsonSchema(schema);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Correct JSON response data\", function () {\r",
																			"    const jsonData = pm.response.json();\r",
																			"\r",
																			"    pm.expect(jsonData.hidden).to.eql(true);\r",
																			"\r",
																			"    pm.expect(jsonData.enrollments).to.eql([\r",
																			"        {\r",
																			"            \"id\": \"1de9808d-b203-40c3-b6c3-184dd58bfa48\",\r",
																			"            \"comment\": \"test-getappointment-enrollments-hidden-comment-5-creator\",\r",
																			"            \"iat\": \"2021-01-01T04:09:23.000Z\",\r",
																			"            \"creator\": {\r",
																			"                \"name\": \"GJM-TestUser GetAppointment-EnrollmentCreator\",\r",
																			"                \"username\": \"gjm-test-getappointment-enrollmentcreator-user\"\r",
																			"            }\r",
																			"        }\r",
																			"    ]);\r",
																			"});"
																		],
																		"type": "text/javascript"
																	}
																},
																{
																	"listen": "prerequest",
																	"script": {
																		"exec": [
																			"const username = pm.environment.get(\"keycloak_username_getappointment-enrollmentcreator\");\r",
																			"const password = pm.environment.get(\"keycloak_password_getappointment-enrollmentcreator\");\r",
																			"\r",
																			"const tokenVariableName = 'bearer_getappointment-enrollmentcreator';\r",
																			"const tokenExpriyDateVariableName = 'bearer_getappointment-enrollmentcreator_expiry_date';\r",
																			"\r",
																			"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
																			"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);\r",
																			"\r",
																			"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																		],
																		"type": "text/javascript"
																	}
																}
															],
															"request": {
																"auth": {
																	"type": "bearer",
																	"bearer": [
																		{
																			"key": "token",
																			"value": "{{bearer_getappointment-enrollmentcreator}}",
																			"type": "string"
																		}
																	]
																},
																"method": "GET",
																"header": [],
																"url": {
																	"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
																	"host": [
																		"{{baseUrl}}"
																	],
																	"path": [
																		"appointments",
																		"{{get_appointment_link}}"
																	]
																}
															},
															"response": []
														}
													]
												},
												{
													"name": "no auth",
													"item": [
														{
															"name": "permissions",
															"item": [
																{
																	"name": "get appointment by link - success - enrollments (hidden) - no auth (permission - 1)",
																	"event": [
																		{
																			"listen": "test",
																			"script": {
																				"exec": [
																					"pm.test(\"Status code is 200\", function () {\r",
																					"    pm.expect(pm.response.code).to.equal(200);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Valid schema\", () => {\r",
																					"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																					"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																					"\r",
																					"    pm.response.to.have.jsonSchema(schema);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Correct JSON response data\", function () {\r",
																					"    const jsonData = pm.response.json();\r",
																					"\r",
																					"    pm.expect(jsonData.hidden).to.eql(true);\r",
																					"    pm.expect(jsonData.enrollments).to.eql([\r",
																					"        {\r",
																					"            \"id\": \"76975e00-00d2-4b38-b300-4f30d7c2d9de\",\r",
																					"            \"name\": \"test-getappointment-enrollments-hidden-name-1\",\r",
																					"            \"comment\": \"test-getappointment-enrollments-hidden-comment-1\",\r",
																					"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																					"        }\r",
																					"    ]);\r",
																					"});"
																				],
																				"type": "text/javascript"
																			}
																		},
																		{
																			"listen": "prerequest",
																			"script": {
																				"exec": [
																					"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																				],
																				"type": "text/javascript"
																			}
																		}
																	],
																	"request": {
																		"method": "GET",
																		"header": [],
																		"url": {
																			"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}?perm1=76975e00-00d2-4b38-b300-4f30d7c2d9de&token1=c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c",
																			"host": [
																				"{{baseUrl}}"
																			],
																			"path": [
																				"appointments",
																				"{{get_appointment_link}}"
																			],
																			"query": [
																				{
																					"key": "perm1",
																					"value": "76975e00-00d2-4b38-b300-4f30d7c2d9de"
																				},
																				{
																					"key": "token1",
																					"value": "c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c"
																				}
																			]
																		}
																	},
																	"response": []
																},
																{
																	"name": "get appointment by link - success - enrollments (hidden) - no auth (permission - 2)",
																	"event": [
																		{
																			"listen": "test",
																			"script": {
																				"exec": [
																					"pm.test(\"Status code is 200\", function () {\r",
																					"    pm.expect(pm.response.code).to.equal(200);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Valid schema\", () => {\r",
																					"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																					"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																					"\r",
																					"    pm.response.to.have.jsonSchema(schema);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Correct JSON response data\", function () {\r",
																					"    const jsonData = pm.response.json();\r",
																					"\r",
																					"    pm.expect(jsonData.hidden).to.eql(true);\r",
																					"    pm.expect(jsonData.enrollments).to.eql([\r",
																					"        {\r",
																					"            \"id\": \"76975e00-00d2-4b38-b300-4f30d7c2d9de\",\r",
																					"            \"name\": \"test-getappointment-enrollments-hidden-name-1\",\r",
																					"            \"comment\": \"test-getappointment-enrollments-hidden-comment-1\",\r",
																					"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																					"        },\r",
																					"        {\r",
																					"            \"id\": \"e0d6c93e-87d9-41c5-b4f5-e53e50b66acd\",\r",
																					"            \"name\": \"test-getappointment-enrollments-hidden-name-2\",\r",
																					"            \"comment\": \"test-getappointment-enrollments-hidden-comment-2\",\r",
																					"            \"iat\": \"2021-01-01T04:06:23.000Z\"\r",
																					"        }\r",
																					"    ]);\r",
																					"});"
																				],
																				"type": "text/javascript"
																			}
																		},
																		{
																			"listen": "prerequest",
																			"script": {
																				"exec": [
																					"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																				],
																				"type": "text/javascript"
																			}
																		}
																	],
																	"request": {
																		"method": "GET",
																		"header": [],
																		"url": {
																			"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}?perm1=76975e00-00d2-4b38-b300-4f30d7c2d9de&token1=c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c&perm2=e0d6c93e-87d9-41c5-b4f5-e53e50b66acd&token2=cdac2554459ef8a12ddd702fbd3cc40816cc9d20ad49800770ae92e0895f3ceb",
																			"host": [
																				"{{baseUrl}}"
																			],
																			"path": [
																				"appointments",
																				"{{get_appointment_link}}"
																			],
																			"query": [
																				{
																					"key": "perm1",
																					"value": "76975e00-00d2-4b38-b300-4f30d7c2d9de"
																				},
																				{
																					"key": "token1",
																					"value": "c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c"
																				},
																				{
																					"key": "perm2",
																					"value": "e0d6c93e-87d9-41c5-b4f5-e53e50b66acd"
																				},
																				{
																					"key": "token2",
																					"value": "cdac2554459ef8a12ddd702fbd3cc40816cc9d20ad49800770ae92e0895f3ceb"
																				}
																			]
																		}
																	},
																	"response": []
																},
																{
																	"name": "get appointment by link - success - enrollments (hidden) - no auth (permission - 1 valid - 1 invalid token)",
																	"event": [
																		{
																			"listen": "test",
																			"script": {
																				"exec": [
																					"pm.test(\"Status code is 200\", function () {\r",
																					"    pm.expect(pm.response.code).to.equal(200);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Valid schema\", () => {\r",
																					"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																					"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																					"\r",
																					"    pm.response.to.have.jsonSchema(schema);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Correct JSON response data\", function () {\r",
																					"    const jsonData = pm.response.json();\r",
																					"\r",
																					"    pm.expect(jsonData.hidden).to.eql(true);\r",
																					"    pm.expect(jsonData.enrollments).to.eql([\r",
																					"        {\r",
																					"            \"id\": \"76975e00-00d2-4b38-b300-4f30d7c2d9de\",\r",
																					"            \"name\": \"test-getappointment-enrollments-hidden-name-1\",\r",
																					"            \"comment\": \"test-getappointment-enrollments-hidden-comment-1\",\r",
																					"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																					"        }\r",
																					"    ]);\r",
																					"});"
																				],
																				"type": "text/javascript"
																			}
																		},
																		{
																			"listen": "prerequest",
																			"script": {
																				"exec": [
																					"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																				],
																				"type": "text/javascript"
																			}
																		}
																	],
																	"request": {
																		"method": "GET",
																		"header": [],
																		"url": {
																			"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}?perm1=76975e00-00d2-4b38-b300-4f30d7c2d9de&token1=c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c&perm2=e0d6c93e-87d9-41c5-b4f5-e53e50b66acd&token2=INVALID_TOKEN",
																			"host": [
																				"{{baseUrl}}"
																			],
																			"path": [
																				"appointments",
																				"{{get_appointment_link}}"
																			],
																			"query": [
																				{
																					"key": "perm1",
																					"value": "76975e00-00d2-4b38-b300-4f30d7c2d9de"
																				},
																				{
																					"key": "token1",
																					"value": "c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c"
																				},
																				{
																					"key": "perm2",
																					"value": "e0d6c93e-87d9-41c5-b4f5-e53e50b66acd"
																				},
																				{
																					"key": "token2",
																					"value": "INVALID_TOKEN"
																				}
																			]
																		}
																	},
																	"response": []
																},
																{
																	"name": "get appointment by link - success - enrollments (hidden) - no auth (permission - 1 valid - 1 invalid id but correct token)",
																	"event": [
																		{
																			"listen": "test",
																			"script": {
																				"exec": [
																					"pm.test(\"Status code is 200\", function () {\r",
																					"    pm.expect(pm.response.code).to.equal(200);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Valid schema\", () => {\r",
																					"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																					"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																					"\r",
																					"    pm.response.to.have.jsonSchema(schema);\r",
																					"});\r",
																					"\r",
																					"pm.test(\"Correct JSON response data\", function () {\r",
																					"    const jsonData = pm.response.json();\r",
																					"\r",
																					"    pm.expect(jsonData.hidden).to.eql(true);\r",
																					"    pm.expect(jsonData.enrollments).to.eql([\r",
																					"        {\r",
																					"            \"id\": \"76975e00-00d2-4b38-b300-4f30d7c2d9de\",\r",
																					"            \"name\": \"test-getappointment-enrollments-hidden-name-1\",\r",
																					"            \"comment\": \"test-getappointment-enrollments-hidden-comment-1\",\r",
																					"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																					"        }\r",
																					"    ]);\r",
																					"});"
																				],
																				"type": "text/javascript"
																			}
																		},
																		{
																			"listen": "prerequest",
																			"script": {
																				"exec": [
																					"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																				],
																				"type": "text/javascript"
																			}
																		}
																	],
																	"request": {
																		"method": "GET",
																		"header": [],
																		"url": {
																			"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}?perm1=76975e00-00d2-4b38-b300-4f30d7c2d9de&token1=c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c&perm2=INVALID_ID&token2=84cae6d780d87ed6604db44c426d88cac1a6aab236351c9dbc8d8fa23ac4d87a",
																			"host": [
																				"{{baseUrl}}"
																			],
																			"path": [
																				"appointments",
																				"{{get_appointment_link}}"
																			],
																			"query": [
																				{
																					"key": "perm1",
																					"value": "76975e00-00d2-4b38-b300-4f30d7c2d9de"
																				},
																				{
																					"key": "token1",
																					"value": "c0b1dc74d399b1e8404bcfc31dda8586ce847f0d60195fd521ce1dbfd349218c"
																				},
																				{
																					"key": "perm2",
																					"value": "INVALID_ID"
																				},
																				{
																					"key": "token2",
																					"value": "84cae6d780d87ed6604db44c426d88cac1a6aab236351c9dbc8d8fa23ac4d87a"
																				}
																			]
																		}
																	},
																	"response": []
																}
															]
														},
														{
															"name": "get appointment by link - success - enrollments (hidden) - no auth",
															"event": [
																{
																	"listen": "test",
																	"script": {
																		"exec": [
																			"pm.test(\"Status code is 200\", function () {\r",
																			"    pm.expect(pm.response.code).to.equal(200);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Valid schema\", () => {\r",
																			"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																			"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																			"\r",
																			"    pm.response.to.have.jsonSchema(schema);\r",
																			"});\r",
																			"\r",
																			"pm.test(\"Correct JSON response data\", function () {\r",
																			"    const jsonData = pm.response.json();\r",
																			"\r",
																			"    pm.expect(jsonData.hidden).to.eql(true);\r",
																			"    pm.expect(jsonData).to.not.have.property(\"enrollments\");\r",
																			"});"
																		],
																		"type": "text/javascript"
																	}
																},
																{
																	"listen": "prerequest",
																	"script": {
																		"exec": [
																			"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-hidden-link\")"
																		],
																		"type": "text/javascript"
																	}
																}
															],
															"request": {
																"method": "GET",
																"header": [],
																"url": {
																	"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
																	"host": [
																		"{{baseUrl}}"
																	],
																	"path": [
																		"appointments",
																		"{{get_appointment_link}}"
																	]
																}
															},
															"response": []
														}
													],
													"auth": {
														"type": "noauth"
													},
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"type": "text/javascript",
																"exec": [
																	""
																]
															}
														},
														{
															"listen": "test",
															"script": {
																"type": "text/javascript",
																"exec": [
																	""
																]
															}
														}
													]
												}
											]
										},
										{
											"name": "additions",
											"item": [
												{
													"name": "get appointment by link - success - enrollments (additions)",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData.enrollments).to.eql([\r",
																	"        {\r",
																	"            \"id\": \"5657eb58-427d-493c-ab88-1af2774572c2\",\r",
																	"            \"name\": \"test-getappointment-enrollments-additions-name-1-no-additions\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-additions-comment-1\",\r",
																	"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"83dd3d7e-de9f-4510-af91-b432c287aa96\",\r",
																	"            \"name\": \"test-getappointment-enrollments-additions-name-3-two-additions\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-additions-comment-3\",\r",
																	"            \"additions\": [\r",
																	"                {\r",
																	"                    \"name\": \"test-getappointment-enrollments-additions-name-1\"\r",
																	"                },\r",
																	"                {\r",
																	"                    \"name\": \"test-getappointment-enrollments-additions-name-3\"\r",
																	"                }\r",
																	"            ],\r",
																	"            \"iat\": \"2021-01-01T04:07:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"ae279597-288b-4479-bc42-b9e887e9d958\",\r",
																	"            \"name\": \"test-getappointment-enrollments-additions-name-2-one-additions\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-additions-comment-2\",\r",
																	"            \"additions\": [\r",
																	"                {\r",
																	"                    \"name\": \"test-getappointment-enrollments-additions-name-1\"\r",
																	"                }\r",
																	"            ],\r",
																	"            \"iat\": \"2021-01-01T04:06:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"ce3ad43e-5c3e-459e-8079-fd7c5c635578\",\r",
																	"            \"name\": \"test-getappointment-enrollments-additions-name-4-all-additions\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-additions-comment-4\",\r",
																	"            \"additions\": [\r",
																	"                {\r",
																	"                    \"name\": \"test-getappointment-enrollments-additions-name-1\"\r",
																	"                },\r",
																	"                {\r",
																	"                    \"name\": \"test-getappointment-enrollments-additions-name-2\"\r",
																	"                },\r",
																	"                {\r",
																	"                    \"name\": \"test-getappointment-enrollments-additions-name-3\"\r",
																	"                },\r",
																	"                {\r",
																	"                    \"name\": \"test-getappointment-enrollments-additions-name-4\"\r",
																	"                }\r",
																	"            ],\r",
																	"            \"iat\": \"2021-01-01T04:08:23.000Z\"\r",
																	"        }\r",
																	"    ]);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-additions-link\")"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{get_appointment_link}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "driverAddition",
											"item": [
												{
													"name": "get appointment by link - success - enrollments (additions)",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData.driverAddition).to.eql(true);\r",
																	"    pm.expect(jsonData.enrollments).to.eql([\r",
																	"        {\r",
																	"            \"id\": \"05340b4f-2715-4b27-a581-31f6fd78d216\",\r",
																	"            \"name\": \"test-getappointment-enrollments-driver-name-1-nothing\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-driver-comment-1\",\r",
																	"            \"iat\": \"2021-01-01T04:05:23.000Z\"\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"05b806e7-322f-474c-b355-15b6ee77fa5d\",\r",
																	"            \"name\": \"test-getappointment-enrollments-driver-name-3-passenger\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-driver-comment-3\",\r",
																	"            \"iat\": \"2021-01-01T04:07:23.000Z\",\r",
																	"            \"passenger\": {\r",
																	"                \"requirement\": 1\r",
																	"            }\r",
																	"        },\r",
																	"        {\r",
																	"            \"id\": \"490d0848-d19c-4573-a864-a13e0a0ae553\",\r",
																	"            \"name\": \"test-getappointment-enrollments-driver-name-2-driver\",\r",
																	"            \"comment\": \"test-getappointment-enrollments-driver-comment-2\",\r",
																	"            \"iat\": \"2021-01-01T04:06:23.000Z\",\r",
																	"            \"driver\": {\r",
																	"                \"seats\": 4,\r",
																	"                \"service\": 1\r",
																	"            }\r",
																	"        }\r",
																	"    ]);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"get_appointment_link\", \"test-getappointment-enrollments-driver-link\")"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{get_appointment_link}}"
															]
														}
													},
													"response": []
												}
											]
										}
									]
								},
								{
									"name": "files",
									"item": [
										{
											"name": "get appointment by link - success - files",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.files).to.eql([\r",
															"        {\r",
															"            \"name\": \"testfile-1.pdf\",\r",
															"            \"url\": pm.environment.get(\"baseUrl\") + \"/files/2e57b350-78fa-472b-b42f-b1de84dac157\",\r",
															"            \"id\": \"2e57b350-78fa-472b-b42f-b1de84dac157\"\r",
															"        },\r",
															"        {\r",
															"            \"name\": \"testfile-2.pdf\",\r",
															"            \"url\": pm.environment.get(\"baseUrl\") + \"/files/eea571f9-e374-46ad-bda4-4b9191db5961\",\r",
															"            \"id\": \"eea571f9-e374-46ad-bda4-4b9191db5961\"\r",
															"        },\r",
															"        {\r",
															"            \"name\": \"testfile-3.pdf\",\r",
															"            \"url\": pm.environment.get(\"baseUrl\") + \"/files/3b3fee67-51ae-4fa8-a303-7251bd28d7ce\",\r",
															"            \"id\": \"3b3fee67-51ae-4fa8-a303-7251bd28d7ce\"\r",
															"        }\r",
															"    ]);\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"get_appointment_link\", \"test-getappointment-files-link\")"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{get_appointment_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{get_appointment_link}}"
													]
												}
											},
											"response": []
										}
									]
								}
							],
							"auth": {
								"type": "bearer",
								"bearer": [
									{
										"key": "token",
										"value": "{{bearer_getappointment}}",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const username = pm.environment.get(\"keycloak_username_getappointment\");",
											"const password = pm.environment.get(\"keycloak_password_getappointment\");",
											"",
											"const tokenVariableName = 'bearer_getappointment';",
											"const tokenExpriyDateVariableName = 'bearer_getappointment_expiry_date';",
											"",
											"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
											"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "update",
							"item": [
								{
									"name": "main",
									"item": [
										{
											"name": "update appointment - success",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-link\");\r",
															"\r",
															"pm.variables.set(\"appointment_update_title_new\", \"test-POSTMAN-appointmentupdate-title-new-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
															"pm.variables.set(\"appointment_update_description_new\", \"test-POSTMAN-appointmentupdate-description-new-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
															"pm.variables.set(\"appointment_update_location_new\",  \"test-POSTMAN-appointmentupdate-location-new-\" + pm.globals.replaceIn('{{$randomCity}}'));"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_title\", pm.variables.get('appointment_update_title_new'));\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_description\", pm.variables.get('appointment_update_description_new'));\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_location\", pm.variables.get('appointment_update_location_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"title\": \"{{appointment_update_title_new}}\",\r\n    \"location\": \"{{appointment_update_location_new}}\",\r\n    \"description\": \"{{appointment_update_description_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{appointment_update_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VALIDATION - get updated appointment",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.title).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_title\"));\r",
															"    pm.expect(jsonData.description).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_description\"));\r",
															"    pm.expect(jsonData.location).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_location\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{VALIDATION_appointment_update_location_header}}",
													"host": [
														"{{VALIDATION_appointment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update appointment - success (as admin)",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const username = pm.environment.get(\"keycloak_username_updateappointment-admin\");\r",
															"const password = pm.environment.get(\"keycloak_password_updateappointment-admin\");\r",
															"\r",
															"const tokenVariableName = 'bearer_updateappointment-admin';\r",
															"const tokenExpriyDateVariableName = 'bearer_updateappointment-admin_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);\r",
															"\r",
															"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-link\");\r",
															"\r",
															"pm.variables.set(\"appointment_update_title_new\", \"test-POSTMAN-appointmentupdate-title-new-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
															"pm.variables.set(\"appointment_update_description_new\", \"test-POSTMAN-appointmentupdate-description-new-\" + pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
															"pm.variables.set(\"appointment_update_location_new\",  \"test-POSTMAN-appointmentupdate-location-new-\" + pm.globals.replaceIn('{{$randomCity}}'));"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_title\", pm.variables.get('appointment_update_title_new'));\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_description\", pm.variables.get('appointment_update_description_new'));\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_location\", pm.variables.get('appointment_update_location_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_updateappointment-admin}}",
															"type": "string"
														}
													]
												},
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"title\": \"{{appointment_update_title_new}}\",\r\n    \"location\": \"{{appointment_update_location_new}}\",\r\n    \"description\": \"{{appointment_update_description_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{appointment_update_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VALIDATION - get updated appointment Copy",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.relations).to.eql([\"ADMIN\"])\r",
															"\r",
															"    pm.expect(jsonData.title).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_title\"));\r",
															"    pm.expect(jsonData.description).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_description\"));\r",
															"    pm.expect(jsonData.location).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_location\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const username = pm.environment.get(\"keycloak_username_updateappointment-admin\");\r",
															"const password = pm.environment.get(\"keycloak_password_updateappointment-admin\");\r",
															"\r",
															"const tokenVariableName = 'bearer_updateappointment-admin';\r",
															"const tokenExpriyDateVariableName = 'bearer_updateappointment-admin_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_updateappointment-admin}}",
															"type": "string"
														}
													]
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{VALIDATION_appointment_update_location_header}}",
													"host": [
														"{{VALIDATION_appointment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update appointment - failure - invalid attribute",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-link\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code 422\", function () {\r",
															"    pm.response.to.have.status(422);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"INVALID_ATTRIBUTE\",\r",
															"        \"message\": \"Following attributes are not allowed to be updated\",\r",
															"        \"data\": [\r",
															"            {\r",
															"                \"attribute\": \"INVALID_ATTRIBUTE\",\r",
															"                \"in\": \"body\",\r",
															"                \"value\": \"ANY_VALUE\",\r",
															"                \"message\": \"The specified attribute is not allowed to be modified\"\r",
															"            }\r",
															"        ]\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"INVALID_ATTRIBUTE\": \"ANY_VALUE\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{appointment_update_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update appointment - failure - not found",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_update_link\", \"INVALID_LINK\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code\", function () {\r",
															"    pm.response.to.have.status(403);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
															"        \"message\": \"Missing permissions to execute request\",\r",
															"        \"data\": {\r",
															"            \"attribute\": \"link\",\r",
															"            \"in\": \"path\",\r",
															"            \"value\": pm.variables.get(\"appointment_update_link\"),\r",
															"            \"message\": \"Specified appointment is not in your ownership. You are also not permitted to administrate this appointment.\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"title\": \"{{appointment_update_title}}\",\r\n    \"location\": \"{{appointment_update_location}}\",\r\n    \"description\": \"{{appointment_update_description}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{appointment_update_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update appointment - failure - missing permissions",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-missingpermissions-link\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code 403\", function () {\r",
															"    pm.response.to.have.status(403);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"    \r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
															"        \"message\": \"Missing permissions to execute request\",\r",
															"        \"data\": {\r",
															"            \"attribute\": \"link\",\r",
															"            \"in\": \"path\",\r",
															"            \"value\": pm.variables.get(\"appointment_update_link\"),\r",
															"            \"message\": \"Specified appointment is not in your ownership. You are also not permitted to administrate this appointment.\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"title\": \"{{appointment_update_title}}\",\r\n    \"location\": \"{{appointment_update_location}}\",\r\n    \"description\": \"{{appointment_update_description}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{appointment_update_link}}"
													]
												}
											},
											"response": []
										}
									],
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								},
								{
									"name": "link",
									"item": [
										{
											"name": "success",
											"item": [
												{
													"name": "PREPARATION - create Appointment - custom link",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"const moment = require('moment');\r",
																	"\r",
																	"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
																	"var date_unix = Date.parse(date);\r",
																	"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
																	"var deadline_unix = Date.parse(deadline);\r",
																	"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-updateappointment-link-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-updateappointment-link-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-updateappointment-link-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Successful POST request\", function () {\r",
																	"    pm.response.to.have.status(201);\r",
																	"});\r",
																	"\r",
																	"const schema = {\r",
																	"    \"type\": \"object\",\r",
																	"    \"properties\": {\r",
																	"        \"id\": { \"type\": \"string\"},\r",
																	"        \"link\": { \"type\": \"string\" }\r",
																	"    },\r",
																	"    \"required\": [\"id\", \"link\"],\r",
																	"    \"additionalProperties\": false\r",
																	"};\r",
																	"\r",
																	"pm.test(\"Validate schema\", () => {\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"const jsonData = pm.response.json();\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_link\", jsonData.link);\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_original\", jsonData.link);"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "POST",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - success - link",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_link_new\", \"test-POSTMAN-appointmentupdate-link-link-new-\" + pm.globals.replaceIn('{{$randomPassword}}'));"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 204\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(204);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_header\", pm.response.headers.get(\"Location\"));\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link\", pm.variables.get('appointment_update_link_new'));\r",
																	"\r",
																	"// UPDATE LINK FOR RE-EXECUTION OF THIS TEST\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_link\", pm.variables.get('appointment_update_link_new'));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"link\": \"{{appointment_update_link_new}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "VALIDATION - get updated appointment - link",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData.link).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_link\"));\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{VALIDATION_appointment_update_link_header}}",
															"host": [
																"{{VALIDATION_appointment_update_link_header}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "VALIDATION - get updated appointment - link - by old link",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Failed GET request\", function () {\r",
																	"    pm.response.to.have.status(404);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"NOT_FOUND\",\r",
																	"        \"message\": \"Requested resource could not be located\",\r",
																	"        \"data\": {\r",
																	"            \"attribute\": \"link\",\r",
																	"            \"in\": \"path\",\r",
																	"            \"value\": pm.collectionVariables.get(\"VALIDATION_appointment_update_link_original\"),\r",
																	"            \"message\": \"Specified appointment does not exist\"\r",
																	"        }\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{baseUrl}}/appointments/{{VALIDATION_appointment_update_link_original}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{VALIDATION_appointment_update_link_original}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "failure",
											"item": [
												{
													"name": "PREPARATION - create Appointment - custom link",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"const moment = require('moment');\r",
																	"\r",
																	"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
																	"var date_unix = Date.parse(date);\r",
																	"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
																	"var deadline_unix = Date.parse(deadline);\r",
																	"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-updateappointment-link-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-updateappointment-link-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-updateappointment-link-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Successful POST request\", function () {\r",
																	"    pm.response.to.have.status(201);\r",
																	"});\r",
																	"\r",
																	"const schema = {\r",
																	"    \"type\": \"object\",\r",
																	"    \"properties\": {\r",
																	"        \"id\": { \"type\": \"string\"},\r",
																	"        \"link\": { \"type\": \"string\" }\r",
																	"    },\r",
																	"    \"required\": [\"id\", \"link\"],\r",
																	"    \"additionalProperties\": false\r",
																	"};\r",
																	"\r",
																	"pm.test(\"Validate schema\", () => {\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"const jsonData = pm.response.json();\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_link\", jsonData.link);"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "POST",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - failure - link in use",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_link_new\",  \"test-updateappointment-link-existinglink-link\");"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Failed POST request\", function () {\r",
																	"    pm.response.to.have.status(409);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"DUPLICATE_VALUES\",\r",
																	"        \"message\": \"Provided values are already in use\",\r",
																	"        \"data\": [\r",
																	"            {\r",
																	"                \"attribute\": \"link\",\r",
																	"                \"value\": pm.variables.get(\"appointment_update_link_new\"),\r",
																	"                \"message\": \"Value is already in use by other appointment. Specify a different link\"\r",
																	"            }\r",
																	"        ]\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"link\": \"{{appointment_update_link_new}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - failure - not found",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_link\",  \"INVALID_LINK\");\r",
																	"\r",
																	"pm.variables.set(\"appointment_update_link_new\", pm.globals.replaceIn(\"{{$randomPassword}}\"));"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status Code 403\", function () {\r",
																	"    pm.response.to.have.status(403);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
																	"        \"message\": \"Missing permissions to execute request\",\r",
																	"        \"data\": {\r",
																	"            \"attribute\": \"link\",\r",
																	"            \"in\": \"path\",\r",
																	"            \"value\": pm.variables.get(\"appointment_update_link\"),\r",
																	"            \"message\": \"Specified appointment is not in your ownership. You are also not permitted to administrate this appointment.\"\r",
																	"        }\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"link\": \"{{appointment_update_link_new}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{appointment_update_link}}"
															]
														}
													},
													"response": []
												}
											]
										}
									]
								},
								{
									"name": "additions",
									"item": [
										{
											"name": "add",
											"item": [
												{
													"name": "PREPARATION - create Appointment",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"const moment = require('moment');\r",
																	"\r",
																	"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
																	"var date_unix = Date.parse(date);\r",
																	"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
																	"var deadline_unix = Date.parse(deadline);\r",
																	"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-updateappointment-additions-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-updateappointment-additions-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Successful POST request\", function () {\r",
																	"    pm.response.to.have.status(201);\r",
																	"});\r",
																	"\r",
																	"const schema = {\r",
																	"    \"type\": \"object\",\r",
																	"    \"properties\": {\r",
																	"        \"id\": { \"type\": \"string\"},\r",
																	"        \"link\": { \"type\": \"string\" }\r",
																	"    },\r",
																	"    \"required\": [\"id\", \"link\"],\r",
																	"    \"additionalProperties\": false\r",
																	"};\r",
																	"\r",
																	"pm.test(\"Validate schema\", () => {\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"const jsonData = pm.response.json();\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_link\", jsonData.link);"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "POST",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - success - additions - add",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_addition_new_1_name\",  \"test-POSTMAN-appointmentupdate-additions-addition-1-new-name-\" + pm.globals.replaceIn('{{$randomWord}}'));\r",
																	"pm.variables.set(\"appointment_update_addition_new_2_name\",  \"test-POSTMAN-appointmentupdate-additions-addition-2-new-name-\" + pm.globals.replaceIn('{{$randomWord}}'));"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 204\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(204);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_header\", pm.response.headers.get(\"Location\"));\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_addition_1_name\", pm.variables.get('appointment_update_addition_new_1_name'));\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_addition_2_name\", pm.variables.get('appointment_update_addition_new_2_name'));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"additions\": [{\r\n        \"name\": \"{{appointment_update_addition_new_1_name}}\"\r\n    },{\r\n        \"name\": \"{{appointment_update_addition_new_2_name}}\"\r\n    }]\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "VALIDATION - get updated appointment - additions - add",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData.additions.length).to.eql(2);\r",
																	"\r",
																	"    pm.expect(jsonData.additions[0].name).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_addition_1_name\"));\r",
																	"    pm.expect(jsonData.additions[0].order).to.eql(0);\r",
																	"    pm.expect(jsonData.additions[1].name).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_update_addition_2_name\"));\r",
																	"    pm.expect(jsonData.additions[1].order).to.eql(1);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{VALIDATION_appointment_update_link_header}}",
															"host": [
																"{{VALIDATION_appointment_update_link_header}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - failure - additions - add - duplicates",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_addition_new_1_name\",  \"test-POSTMAN-appointmentupdate-additions-addition-1-new-name-\" + pm.globals.replaceIn('{{$randomWord}}'));"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Failed GET request\", function () {\r",
																	"    pm.response.to.have.status(400);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"DUPLICATE_ENTRY\",\r",
																	"        \"message\": \"Following values are duplicates and can not be used\",\r",
																	"        \"data\": [\r",
																	"            {\r",
																	"                \"object\": \"addition\",\r",
																	"                \"attribute\": \"name\",\r",
																	"                \"value\": pm.variables.get(\"appointment_update_addition_new_1_name\"),\r",
																	"                \"in\": \"body\"\r",
																	"            }\r",
																	"        ]\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"additions\": [{\r\n        \"name\": \"{{appointment_update_addition_new_1_name}}\"\r\n    },{\r\n        \"name\": \"{{appointment_update_addition_new_1_name}}\"\r\n    }]\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - failure - additions - add - no name provided",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_addition_new_1_name\",  \"test-POSTMAN-appointmentupdate-additions-addition-1-new-name-\" + pm.globals.replaceIn('{{$randomWord}}'));"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Failed GET request\", function () {\r",
																	"    pm.response.to.have.status(400);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"MISSING_VALUES\",\r",
																	"        \"message\": \"Please specify the following values\",\r",
																	"        \"data\": [\r",
																	"            {\r",
																	"                \"object\": \"addition\",\r",
																	"                \"in\": \"body\",\r",
																	"                \"attribute\": \"name\",\r",
																	"                \"message\": \"Object has no attribute 'name'. Either provide a valid id to refer to a Addition, or provide a name for Addition creation.\"\r",
																	"            }\r",
																	"        ]\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"additions\": [{\r\n        \"name\": \"{{appointment_update_addition_new_1_name}}\"\r\n    },{\r\n       \"any\": \"attribute\"\r\n    }]\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "remove",
											"item": [
												{
													"name": "PREPARATION - create Appointment - additions",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"const moment = require('moment');\r",
																	"\r",
																	"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
																	"var date_unix = Date.parse(date);\r",
																	"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
																	"var deadline_unix = Date.parse(deadline);\r",
																	"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-updateappointment-additions-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-updateappointment-additions-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);\r",
																	"\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_1_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-1-name\");\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_2_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-2-name\");"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Successful POST request\", function () {\r",
																	"    pm.response.to.have.status(201);\r",
																	"});\r",
																	"\r",
																	"const schema = {\r",
																	"    \"type\": \"object\",\r",
																	"    \"properties\": {\r",
																	"        \"id\": { \"type\": \"string\"},\r",
																	"        \"link\": { \"type\": \"string\" }\r",
																	"    },\r",
																	"    \"required\": [\"id\", \"link\"],\r",
																	"    \"additionalProperties\": false\r",
																	"};\r",
																	"\r",
																	"pm.test(\"Validate schema\", () => {\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"var jsonData = pm.response.json();\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_link\", jsonData.link);\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_1\", pm.variables.get('PREPARATION_appointment_creation_addition_1_name'));\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_2\", pm.variables.get('PREPARATION_appointment_creation_addition_2_name'));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "POST",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\",\r\n    \"additions\": [{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_1_name}}\"\r\n    },{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_2_name}}\"\r\n    }]\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - success - additions - remove",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 204\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(204);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_header\", pm.response.headers.get(\"Location\"));\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link\", pm.collectionVariables.get('PREPARATION_appointment_update_link'));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"additions\": []\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "VALIDATION - get updated appointment - additions - remove",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.not.have.property(\"additions\");\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{VALIDATION_appointment_update_link_header}}",
															"host": [
																"{{VALIDATION_appointment_update_link_header}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "change order (keep current enrollment additions)",
											"item": [
												{
													"name": "PREPARATION - create Appointment - success - change order",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"const moment = require('moment');\r",
																	"\r",
																	"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
																	"var date_unix = Date.parse(date);\r",
																	"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
																	"var deadline_unix = Date.parse(deadline);\r",
																	"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
																	"\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-updateappointment-additions-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-updateappointment-additions-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);\r",
																	"\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_1_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-1-name\");\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_2_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-2-name\");\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_3_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-3-name\");\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_4_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-4-name\");\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_5_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-5-name\");\r",
																	"pm.variables.set(\"PREPARATION_appointment_creation_addition_6_name\",  \"test-POSTMAN-PREPARATION-updateappointment-additions-addition-6-name\");"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Successful POST request\", function () {\r",
																	"    pm.response.to.have.status(201);\r",
																	"});\r",
																	"\r",
																	"const schema = {\r",
																	"    \"type\": \"object\",\r",
																	"    \"properties\": {\r",
																	"        \"id\": { \"type\": \"string\"},\r",
																	"        \"link\": { \"type\": \"string\" }\r",
																	"    },\r",
																	"    \"required\": [\"id\", \"link\"],\r",
																	"    \"additionalProperties\": false\r",
																	"};\r",
																	"\r",
																	"pm.test(\"validate schema\", () => {\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"var jsonData = pm.response.json();\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/appointments/\" + jsonData.link);\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_id\", jsonData.id);\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_link\", jsonData.link);\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_1_name\", pm.variables.get('PREPARATION_appointment_creation_addition_1_name'));\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_2_name\", pm.variables.get('PREPARATION_appointment_creation_addition_2_name'));\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_3_name\", pm.variables.get('PREPARATION_appointment_creation_addition_3_name'));\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_4_name\", pm.variables.get('PREPARATION_appointment_creation_addition_4_name'));\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_5_name\", pm.variables.get('PREPARATION_appointment_creation_addition_5_name'));\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_6_name\", pm.variables.get('PREPARATION_appointment_creation_addition_6_name'));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "POST",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\",\r\n    \"additions\": [{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_1_name}}\"\r\n    },{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_2_name}}\"\r\n    },{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_3_name}}\"\r\n    },{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_4_name}}\"\r\n    },{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_5_name}}\"\r\n    },{\r\n        \"name\": \"{{PREPARATION_appointment_creation_addition_6_name}}\"\r\n    }]\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments"
															]
														}
													},
													"response": []
												},
												{
													"name": "PREPRATION - get created appointment- change order (for IDs)",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"const jsonData = pm.response.json();\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    pm.expect(jsonData.additions.length).to.eql(6);\r",
																	"\r",
																	"    pm.expect(jsonData.additions[0].name).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_1_name\"));\r",
																	"    pm.expect(jsonData.additions[0].order).to.eql(0);\r",
																	"    pm.expect(jsonData.additions[1].name).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_2_name\"));\r",
																	"    pm.expect(jsonData.additions[1].order).to.eql(1);\r",
																	"    pm.expect(jsonData.additions[2].name).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_3_name\"));\r",
																	"    pm.expect(jsonData.additions[2].order).to.eql(2);\r",
																	"    pm.expect(jsonData.additions[3].name).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_4_name\"));\r",
																	"    pm.expect(jsonData.additions[3].order).to.eql(3);\r",
																	"    pm.expect(jsonData.additions[4].name).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_5_name\"));\r",
																	"    pm.expect(jsonData.additions[4].order).to.eql(4);\r",
																	"    pm.expect(jsonData.additions[5].name).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_6_name\"));\r",
																	"    pm.expect(jsonData.additions[5].order).to.eql(5);\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_1_id\", jsonData.additions[0].id);\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_2_id\", jsonData.additions[1].id);\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_3_id\", jsonData.additions[2].id);\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_4_id\", jsonData.additions[3].id);\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_5_id\", jsonData.additions[4].id);\r",
																	"pm.collectionVariables.set(\"PREPARATION_appointment_update_addition_6_id\", jsonData.additions[5].id);"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{PREPARATION_appointment_update_location_header}}",
															"host": [
																"{{PREPARATION_appointment_update_location_header}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - success - additions - change order",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"\r",
																	"pm.variables.set(\"appointment_update_addition_1_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_1_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_2_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_2_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_3_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_3_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_4_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_4_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_5_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_5_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_6_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_6_id'));"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 204\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(204);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_header\", pm.response.headers.get(\"Location\"));\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link\", pm.collectionVariables.get('prep_updateappointment_link'));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"additions\": [{\r\n        \"id\": \"{{appointment_update_addition_1_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_2_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_4_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_6_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_5_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_3_id}}\"\r\n    }]\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "VALIDATION - get created appointment - change order",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"const jsonData = pm.response.json();\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    pm.expect(jsonData.additions.length).to.eql(6);\r",
																	"\r",
																	"    pm.expect(jsonData.additions[0].id).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_1_id\"));\r",
																	"    pm.expect(jsonData.additions[0].order).to.eql(0);\r",
																	"    pm.expect(jsonData.additions[1].id).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_2_id\"));\r",
																	"    pm.expect(jsonData.additions[1].order).to.eql(1);\r",
																	"    pm.expect(jsonData.additions[2].id).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_4_id\"));\r",
																	"    pm.expect(jsonData.additions[2].order).to.eql(2);\r",
																	"    pm.expect(jsonData.additions[3].id).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_6_id\"));\r",
																	"    pm.expect(jsonData.additions[3].order).to.eql(3);\r",
																	"    pm.expect(jsonData.additions[4].id).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_5_id\"));\r",
																	"    pm.expect(jsonData.additions[4].order).to.eql(4);\r",
																	"    pm.expect(jsonData.additions[5].id).to.eql(pm.collectionVariables.get(\"PREPARATION_appointment_update_addition_3_id\"));\r",
																	"    pm.expect(jsonData.additions[5].order).to.eql(5);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{VALIDATION_appointment_update_link_header}}",
															"host": [
																"{{VALIDATION_appointment_update_link_header}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - failure - additions - change order - no name provided",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_addition_1_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_1_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_2_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_2_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_3_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_3_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_4_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_4_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_5_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_5_id'));\r",
																	"pm.variables.set(\"appointment_update_addition_6_id\", pm.collectionVariables.get('PREPARATION_appointment_update_addition_6_id'));"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Failed GET request\", function () {\r",
																	"    pm.response.to.have.status(400);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"MISSING_VALUES\",\r",
																	"        \"message\": \"Please specify the following values\",\r",
																	"        \"data\": [\r",
																	"            {\r",
																	"                \"object\": \"addition\",\r",
																	"                \"in\": \"body\",\r",
																	"                \"attribute\": \"name\",\r",
																	"                \"message\": \"Object has no attribute 'name'. Either provide a valid id to refer to a Addition, or provide a name for Addition creation.\"\r",
																	"            }\r",
																	"        ]\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"additions\": [{\r\n        \"id\": \"{{appointment_update_addition_1_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_2_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_4_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_6_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_5_id}}\"\r\n    }, {\r\n        \"id\": \"{{appointment_update_addition_3_id}}\"\r\n    }, {\r\n        \"any\": \"attribute\"\r\n    }]\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{PREPARATION_appointment_update_link}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "__rename",
											"item": []
										},
										{
											"name": "__mix_adding_existing_addition_not_adding_name_twice",
											"item": []
										}
									]
								},
								{
									"name": "dates",
									"item": [
										{
											"name": "date",
											"item": [
												{
													"name": "update appointment - success - date",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-date-link\");\r",
																	"\r",
																	"pm.variables.set(\"appointment_update_date_new\", \"2021-05-01 10:05:23\");"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 204\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(204);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_header\", pm.response.headers.get(\"Location\"));\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_date\", pm.variables.get(\"appointment_update_date_new\"));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"date\": \"{{appointment_update_date_new}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "VALIDATION - get updated appointment - date",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"const moment = require('moment');\r",
																	"\r",
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    date_final_orig = moment(jsonData.date).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
																	"\r",
																	"    var date_final = moment(pm.collectionVariables.get(\"VALIDATION_appointment_update_date\")).subtract({hours: 2}).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
																	"\r",
																	"    pm.expect(date_final_orig).to.eql(date_final);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{VALIDATION_appointment_update_link_header}}",
															"host": [
																"{{VALIDATION_appointment_update_link_header}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - failure - date - date < deadline",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-date-link\");\r",
																	"\r",
																	"pm.variables.set(\"appointment_update_date_new\", \"2000-01-01 20:05:23\");"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Failed PUT request\", function () {\r",
																	"    pm.response.to.have.status(422);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"INVALID_VALUES\",\r",
																	"        \"message\": \"Given values can not be processed\",\r",
																	"        \"data\": [\r",
																	"            {\r",
																	"                \"attribute\": \"date\",\r",
																	"                \"value\": pm.variables.get(\"appointment_update_date_new\"),\r",
																	"                \"message\": \"The specified date is timed before the deadline\"\r",
																	"            }\r",
																	"        ]\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"date\": \"{{appointment_update_date_new}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{appointment_update_link}}"
															]
														}
													},
													"response": []
												}
											]
										},
										{
											"name": "deadline",
											"item": [
												{
													"name": "update appointment - success - deadline",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-date-link\");\r",
																	"\r",
																	"pm.variables.set(\"appointment_update_deadline_new\", \"2020-12-30 10:05:23\");"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Status code is 204\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(204);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Location header is present\", function () {\r",
																	"    pm.response.to.have.header(\"Location\");\r",
																	"});\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_header\", pm.response.headers.get(\"Location\"));\r",
																	"\r",
																	"pm.collectionVariables.set(\"VALIDATION_appointment_update_deadline\", pm.variables.get(\"appointment_update_deadline_new\"));"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"deadline\": \"{{appointment_update_deadline_new}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{appointment_update_link}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "VALIDATION - get updated appointment - date",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"const moment = require('moment');\r",
																	"\r",
																	"pm.test(\"Status code is 200\", function () {\r",
																	"    pm.expect(pm.response.code).to.equal(200);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Valid schema\", () => {\r",
																	"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
																	"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
																	"\r",
																	"    pm.response.to.have.jsonSchema(schema);\r",
																	"});\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    const jsonData = pm.response.json();\r",
																	"\r",
																	"    var deadline_unix_orig = Date.parse(jsonData.deadline);\r",
																	"    var deadline_final_orig = moment(deadline_unix_orig).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
																	"\r",
																	"    var deadline_unix = Date.parse(pm.collectionVariables.get(\"VALIDATION_appointment_update_deadline\"));\r",
																	"    var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mm:ss.sZ\");\r",
																	"\r",
																	"    pm.expect(deadline_final_orig).to.eql(deadline_final);\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "GET",
														"header": [],
														"url": {
															"raw": "{{VALIDATION_appointment_update_link_header}}",
															"host": [
																"{{VALIDATION_appointment_update_link_header}}"
															]
														}
													},
													"response": []
												},
												{
													"name": "update appointment - failure - date - deadline < date",
													"event": [
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"appointment_update_link\", \"test-updateappointment-date-link\");\r",
																	"\r",
																	"pm.variables.set(\"appointment_update_deadline_new\", \"2040-01-01 20:05:23\");"
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "test",
															"script": {
																"exec": [
																	"pm.test(\"Failed PUT request\", function () {\r",
																	"    pm.response.to.have.status(422);\r",
																	"});\r",
																	"\r",
																	"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
																	"testSchema(pm.response);\r",
																	"\r",
																	"pm.test(\"Correct JSON response data\", function () {\r",
																	"    var jsonData = pm.response.json();\r",
																	"\r",
																	"    pm.expect(jsonData).to.eql({\r",
																	"        \"code\": \"INVALID_VALUES\",\r",
																	"        \"message\": \"Given values can not be processed\",\r",
																	"        \"data\": [\r",
																	"            {\r",
																	"                \"attribute\": \"deadline\",\r",
																	"                \"value\": pm.variables.get(\"appointment_update_deadline_new\"),\r",
																	"                \"message\": \"The specified deadline is timed after the date\"\r",
																	"            }\r",
																	"        ]\r",
																	"    });\r",
																	"});"
																],
																"type": "text/javascript"
															}
														}
													],
													"request": {
														"method": "PUT",
														"header": [],
														"body": {
															"mode": "raw",
															"raw": "{\r\n    \"deadline\": \"{{appointment_update_deadline_new}}\"\r\n}",
															"options": {
																"raw": {
																	"language": "json"
																}
															}
														},
														"url": {
															"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"appointments",
																"{{appointment_update_link}}"
															]
														}
													},
													"response": []
												}
											]
										}
									]
								},
								{
									"name": "hidden",
									"item": [
										{
											"name": "RESET - update appointment - success - hidden",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_update_link\",  \"test-updateappointment-hidden-link\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"RESET_appointment_update_link_header\", pm.response.headers.get(\"Location\"));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"hidden\": false\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{appointment_update_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "RESET VALIDATION - get updated appointment - hidden",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.enrollments.length).to.eql(3);\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{RESET_appointment_update_link_header}}",
													"host": [
														"{{RESET_appointment_update_link_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update appointment - success - hidden",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_update_link\",  \"test-updateappointment-hidden-link\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_appointment_update_link_header\", pm.response.headers.get(\"Location\"));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"hidden\": true\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{RESET_appointment_update_link_header}}",
													"host": [
														"{{RESET_appointment_update_link_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VALIDATION - get updated appointment - hidden (no enrollments returned)",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.hidden).to.eql(true);\r",
															"    pm.expect(jsonData).to.not.have.property(\"enrollments\");\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{VALIDATION_appointment_update_link_header}}",
													"host": [
														"{{VALIDATION_appointment_update_link_header}}"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "PROTECTION CHECK - update",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_update_link\", \"ANY_LINK\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 401\", function () {\r",
													"    pm.response.to.have.status(401);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"statusCode\": 401,\r",
													"        \"message\": \"Missing or invalid Authorization header\",\r",
													"        \"error\": \"Unauthorized\"\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{baseUrl}}/appointments/{{appointment_update_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{appointment_update_link}}"
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "bearer",
								"bearer": [
									{
										"key": "token",
										"value": "{{bearer_updateappointment}}",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const username = pm.environment.get(\"keycloak_username_updateappointment\");",
											"const password = pm.environment.get(\"keycloak_password_updateappointment\");",
											"",
											"const tokenVariableName = 'bearer_updateappointment';",
											"const tokenExpriyDateVariableName = 'bearer_updateappointment_expiry_date';",
											"",
											"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
											"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "management-relation",
							"item": [
								{
									"name": "PROTECTION CHECK - appointment - managementrelations",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_managementrelations_link\", \"ANY_LINK\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 401\", function () {\r",
													"    pm.response.to.have.status(401);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"statusCode\": 401,\r",
													"        \"message\": \"Missing or invalid Authorization header\",\r",
													"        \"error\": \"Unauthorized\"\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{appointment_managementrelations_link}}/management-relations",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{appointment_managementrelations_link}}",
												"management-relations"
											]
										}
									},
									"response": []
								},
								{
									"name": "appointment - managementrelations - success - as appointment creator",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const username = pm.environment.get(\"keycloak_username_appointment_managementrelations\");\r",
													"const password = pm.environment.get(\"keycloak_password_appointment_managementrelations\");\r",
													"\r",
													"const tokenVariableName = 'bearer_appointment_managementrelations';\r",
													"const tokenExpriyDateVariableName = 'bearer_appointment_managementrelations_expiry_date';\r",
													"\r",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);\r",
													"\r",
													"pm.variables.set(\"appointment_managementrelations_link\", \"test-appointment-managementrelations-link\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    pm.expect(pm.response.json()). to.eql([\r",
													"        \"CREATOR\"\r",
													"    ])\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{bearer_appointment_managementrelations}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{appointment_managementrelations_link}}/management-relations",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{appointment_managementrelations_link}}",
												"management-relations"
											]
										}
									},
									"response": []
								},
								{
									"name": "appointment - managementrelations - success - as appointment admin",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const username = pm.environment.get(\"keycloak_username_appointment_managementrelations-admin\");\r",
													"const password = pm.environment.get(\"keycloak_password_appointment_managementrelations-admin\");\r",
													"\r",
													"const tokenVariableName = 'bearer_appointment_managementrelations-admin';\r",
													"const tokenExpriyDateVariableName = 'bearer_appointment_managementrelations-admin_expiry_date';\r",
													"\r",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);\r",
													"\r",
													"pm.variables.set(\"appointment_managementrelations_link\", \"test-appointment-managementrelations-link\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    pm.expect(pm.response.json()). to.eql([\r",
													"        \"ADMIN\"\r",
													"    ])\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{bearer_appointment_managementrelations-admin}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{appointment_managementrelations_link}}/management-relations",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{appointment_managementrelations_link}}",
												"management-relations"
											]
										}
									},
									"response": []
								},
								{
									"name": "appointment - managementrelations - success - no relation",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const username = pm.environment.get(\"keycloak_username_appointment_managementrelations-regularuser\");\r",
													"const password = pm.environment.get(\"keycloak_password_appointment_managementrelations-regularuser\");\r",
													"\r",
													"const tokenVariableName = 'bearer_appointment_managementrelations-regularuser';\r",
													"const tokenExpriyDateVariableName = 'bearer_appointment_managementrelations-regularuser_expiry_date';\r",
													"\r",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);\r",
													"\r",
													"pm.variables.set(\"appointment_managementrelations_link\", \"test-appointment-managementrelations-link\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    pm.expect(pm.response.json()). to.eql([])\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{bearer_appointment_managementrelations-regularuser}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{appointment_managementrelations_link}}/management-relations",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{appointment_managementrelations_link}}",
												"management-relations"
											]
										}
									},
									"response": []
								},
								{
									"name": "appointment - managementrelations - failure - not found",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const username = pm.environment.get(\"keycloak_username_appointment_managementrelations\");\r",
													"const password = pm.environment.get(\"keycloak_password_appointment_managementrelations\");\r",
													"\r",
													"const tokenVariableName = 'bearer_appointment_managementrelations';\r",
													"const tokenExpriyDateVariableName = 'bearer_appointment_managementrelations_expiry_date';\r",
													"\r",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);\r",
													"\r",
													"pm.variables.set(\"appointment_managementrelations_link\", \"ANY_LINK\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Failed GET request\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"link\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"appointment_managementrelations_link\"),\r",
													"            \"message\": \"Specified appointment does not exist\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{bearer_appointment_managementrelations}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{appointment_managementrelations_link}}/management-relations",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{appointment_managementrelations_link}}",
												"management-relations"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "files",
					"item": [
						{
							"name": "add",
							"item": [
								{
									"name": "single file",
									"item": [
										{
											"name": "PREPARATION - create Appointment",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const moment = require('moment');\r",
															"\r",
															"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
															"var date_unix = Date.parse(date);\r",
															"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
															"\r",
															"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
															"var deadline_unix = Date.parse(deadline);\r",
															"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
															"\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-managefiles-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-managefiles-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-managefiles-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\"},\r",
															"        \"link\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\", \"link\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"const jsonData = pm.response.json();\r",
															"\r",
															"pm.collectionVariables.set(\"PREPARATION_appointment_files_link\", jsonData.link);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments"
													]
												}
											},
											"response": []
										},
										{
											"name": "PREPARATION - manage Administrators - add",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-managefiles-admin-user\")"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_files_link}}\"\r\n    }\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/administrators",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"administrators"
													]
												}
											},
											"response": []
										},
										{
											"name": "manage Files - success - add",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "formdata",
													"formdata": [
														{
															"key": "files",
															"type": "file",
															"src": "testfile.pdf"
														},
														{
															"key": "appointment",
															"value": "{{PREPARATION_appointment_files_link}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{baseUrl}}/files",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"files"
													]
												}
											},
											"response": []
										},
										{
											"name": "VALIDATION - get manipulated appointment - manage Files - add - get appointment",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.files[0].name).to.eql(\"testfile.pdf\");\r",
															"    pm.expect(jsonData.files[0].url).to.eql(pm.environment.get(\"baseUrl\") + \"/files/\" + jsonData.files[0].id);\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_files_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{PREPARATION_appointment_files_link}}"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "two files",
									"item": [
										{
											"name": "PREPARATION - create Appointment",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const moment = require('moment');\r",
															"\r",
															"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
															"var date_unix = Date.parse(date);\r",
															"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
															"\r",
															"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
															"var deadline_unix = Date.parse(deadline);\r",
															"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
															"\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-managefiles-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-managefiles-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-managefiles-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\"},\r",
															"        \"link\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\", \"link\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"const jsonData = pm.response.json();\r",
															"\r",
															"pm.collectionVariables.set(\"PREPARATION_appointment_files_link\", jsonData.link);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments"
													]
												}
											},
											"response": []
										},
										{
											"name": "PREPARATION - manage Administrators - add",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-managefiles-admin-user\")"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_files_link}}\"\r\n    }\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/administrators",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"administrators"
													]
												}
											},
											"response": []
										},
										{
											"name": "manage Files - success - add",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "formdata",
													"formdata": [
														{
															"key": "files",
															"type": "file",
															"src": [
																"testfile.pdf",
																"testfile.txt"
															]
														},
														{
															"key": "appointment",
															"value": "{{PREPARATION_appointment_files_link}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{baseUrl}}/files",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"files"
													]
												}
											},
											"response": []
										},
										{
											"name": "VALIDATION - get manipulated appointment - manage Files - add - get appointment",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.files[0].name).to.eql(\"testfile.pdf\");\r",
															"    pm.expect(jsonData.files[0].url).to.eql(pm.environment.get(\"baseUrl\") + \"/files/\" + jsonData.files[0].id);\r",
															"    pm.expect(jsonData.files[1].name).to.eql(\"testfile.txt\");\r",
															"    pm.expect(jsonData.files[1].url).to.eql(pm.environment.get(\"baseUrl\") + \"/files/\" + jsonData.files[1].id);\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_files_link}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments",
														"{{PREPARATION_appointment_files_link}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "manage Files - failure - add - no permission (as admin)",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-managefiles-admin-user\")\r",
															"\r",
															"const username = pm.environment.get(\"keycloak_username_managefiles-admin\");\r",
															"const password = pm.environment.get(\"keycloak_password_managefiles-admin\");\r",
															"\r",
															"const tokenVariableName = 'bearer_managefiles-admin';\r",
															"const tokenExpriyDateVariableName = 'bearer_managefiles-admin_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code 403\", function () {\r",
															"    pm.response.to.have.status(403);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
															"        \"message\": \"Missing permissions to execute request\",\r",
															"        \"data\": {\r",
															"            \"attribute\": \"link\",\r",
															"            \"in\": \"path\",\r",
															"            \"value\": pm.collectionVariables.get(\"PREPARATION_appointment_files_link\"),\r",
															"            \"message\": \"Specified appointment is not in your ownership. You are not allowed to manage files as administrator.\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_managefiles-admin}}",
															"type": "string"
														}
													]
												},
												"method": "POST",
												"header": [],
												"body": {
													"mode": "formdata",
													"formdata": [
														{
															"key": "files",
															"type": "file",
															"src": [
																"testfile.pdf",
																"testfile.txt"
															]
														},
														{
															"key": "appointment",
															"value": "{{PREPARATION_appointment_files_link}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{baseUrl}}/files",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"files"
													]
												}
											},
											"response": []
										},
										{
											"name": "manage Files - failure - add - not found (appointment)",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"appointment_files_link\", \"INVALID_LINK\")"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code 404\", function () {\r",
															"    pm.response.to.have.status(404);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"NOT_FOUND\",\r",
															"        \"message\": \"Requested resource could not be located\",\r",
															"        \"data\": {\r",
															"            \"attribute\": \"link\",\r",
															"            \"in\": \"path\",\r",
															"            \"value\": pm.variables.get(\"appointment_files_link\"),\r",
															"            \"message\": \"Specified appointment does not exist\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "formdata",
													"formdata": [
														{
															"key": "files",
															"type": "file",
															"src": [
																"testfile.pdf",
																"testfile.txt"
															]
														},
														{
															"key": "appointment",
															"value": "{{appointment_files_link}}",
															"type": "text"
														}
													]
												},
												"url": {
													"raw": "{{baseUrl}}/files",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"files"
													]
												}
											},
											"response": []
										}
									]
								}
							]
						},
						{
							"name": "remove",
							"item": [
								{
									"name": "PREPARATION - create Appointment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-managefiles-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-managefiles-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-managefiles-location-\" + pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"\r",
													"pm.collectionVariables.set(\"PREPARATION_appointment_files_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "PREPARATION - manage Adminsitrators  - add",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-managefiles-admin-user\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_files_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								},
								{
									"name": "PREPARATION - manage Files - success - add",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "formdata",
											"formdata": [
												{
													"key": "files",
													"type": "file",
													"src": [
														"testfile.pdf",
														"testfile.txt"
													]
												},
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_files_link}}",
													"type": "text"
												}
											]
										},
										"url": {
											"raw": "{{baseUrl}}/files",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"files"
											]
										}
									},
									"response": []
								},
								{
									"name": "PREPARATION - get manipulated appointment - manage Files - add - get appointment",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"\r",
													"pm.collectionVariables.set(\"PREPARATION_file_creation_id_1\", jsonData.files[0].id);\r",
													"pm.collectionVariables.set(\"PREPARATION_file_creation_id_2\", jsonData.files[1].id);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_files_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{PREPARATION_appointment_files_link}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Files - success - remove",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/files/{{PREPARATION_file_creation_id_1}}?appointment={{PREPARATION_appointment_files_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"files",
												"{{PREPARATION_file_creation_id_1}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_files_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get manipulated appointment - manage Files - remove - get appointment",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.files).lengthOf(1);\r",
													"\r",
													"    pm.expect(jsonData.files[0].id).to.eql(pm.collectionVariables.get(\"PREPARATION_file_creation_id_2\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_files_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{PREPARATION_appointment_files_link}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Files - failure - no permission (as admin)",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Satus Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"appointment\",\r",
													"            \"in\": \"query\",\r",
													"            \"value\": pm.variables.get(\"PREPARATION_appointment_files_link\"),\r",
													"            \"message\": \"Specified appointment is not in your ownership. You are not allowed to manage files as administrator.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"file_id\", \"ANY_ID\");\r",
													"\r",
													"const username = pm.environment.get(\"keycloak_username_managefiles-admin\");\r",
													"const password = pm.environment.get(\"keycloak_password_managefiles-admin\");\r",
													"\r",
													"const tokenVariableName = 'bearer_managefiles-admin';\r",
													"const tokenExpriyDateVariableName = 'bearer_managefiles-admin_expiry_date';\r",
													"\r",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{bearer_managefiles-admin}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/files/{{file_id}}?appointment={{PREPARATION_appointment_files_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"files",
												"{{file_id}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_files_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Files - failure - not Found (file)",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Satus Code 404\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"id\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"file_id\"),\r",
													"            \"message\": \"Specified file does not exist\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"file_id\", \"INVALID_ID\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/files/{{file_id}}?appointment={{PREPARATION_appointment_files_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"files",
												"{{file_id}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_files_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Files - failure - not Found (appointment)",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Satus Code 404\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"appointment\",\r",
													"            \"in\": \"query\",\r",
													"            \"value\": pm.variables.get(\"appointment_files_link\"),\r",
													"            \"message\": \"Specified appointment does not exist\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_files_link\", \"INVALID_LINK\");\r",
													"pm.variables.set(\"file_id\", \"ANY_ID\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/files/{{file_id}}?appointment={{appointment_files_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"files",
												"{{file_id}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{appointment_files_link}}"
												}
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "PROTECTION CHECK - manage Files - add",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.eql({\r",
											"        \"statusCode\": 401,\r",
											"        \"message\": \"Missing or invalid Authorization header\",\r",
											"        \"error\": \"Unauthorized\"\r",
											"    });\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{baseUrl}}/files",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"files"
									]
								}
							},
							"response": []
						},
						{
							"name": "PROTECTION CHECK - manage Files - remove",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.variables.set(\"file_id\", \"ANY_ID\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.eql({\r",
											"        \"statusCode\": 401,\r",
											"        \"message\": \"Missing or invalid Authorization header\",\r",
											"        \"error\": \"Unauthorized\"\r",
											"    });\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": []
								},
								"url": {
									"raw": "{{baseUrl}}/files/{{file_id}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"files",
										"{{file_id}}"
									]
								}
							},
							"response": []
						}
					],
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{bearer_managefiles}}",
								"type": "string"
							}
						]
					},
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"const username = pm.environment.get(\"keycloak_username_managefiles\");",
									"const password = pm.environment.get(\"keycloak_password_managefiles\");",
									"",
									"const tokenVariableName = 'bearer_managefiles';",
									"const tokenExpriyDateVariableName = 'bearer_managefiles_expiry_date';",
									"",
									"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
									"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "administrators",
					"item": [
						{
							"name": "add",
							"item": [
								{
									"name": "PREPARATION - create Appointment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-manageadministrators-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-manageadministrators-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-manageadministrators-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"\r",
													"pm.collectionVariables.set(\"PREPARATION_appointment_administrators_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Administrators - add",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-admin-user\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_adminsitrators_administrator_username\", pm.variables.get(\"appointment_administrators_admin_username\"));"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_administrators_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get manipulated appointment - manage Administrators - add",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.administrators[0].username).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_adminsitrators_administrator_username\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{PREPARATION_appointment_administrators_link}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Administrators - success - add - already admin",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_link\", \"test-manageadministrators-existingadmin-link\")\r",
													"\r",
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-admin-user\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_adminsitrators_administrator_username\", pm.variables.get(\"appointment_administrators_admin_username\"));"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_administrators_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get manipulated appointment - manage Administrators - add Copy",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.administrators[0].username).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_adminsitrators_administrator_username\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{PREPARATION_appointment_administrators_link}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Administrators - failure - add - no permissions (as admin)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-admin-user\")\r",
													"\r",
													"const username = pm.environment.get(\"keycloak_username_manageadministrators-admin\");\r",
													"const password = pm.environment.get(\"keycloak_password_manageadministrators-admin\");\r",
													"\r",
													"const tokenVariableName = 'bearer_manageadministrators-admin';\r",
													"const tokenExpriyDateVariableName = 'bearer_manageadministrators-admin_expiry_date';\r",
													"\r",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"link\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.collectionVariables.get(\"PREPARATION_appointment_administrators_link\"),\r",
													"            \"message\": \"Specified appointment is not in your ownership. You are not allowed to manage administrators as administrator.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{bearer_manageadministrators-admin}}",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_administrators_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Administrators - failure - add - not found",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"INVALID_USERNAME\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 404\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"username\",\r",
													"            \"in\": \"body\",\r",
													"            \"value\": pm.variables.get(\"appointment_administrators_admin_username\"),\r",
													"            \"message\": \"Specified user does not exist\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_administrators_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Administrators - failure - add - not found (appointment)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_link\", \"INVALID_LINK\")\r",
													"\r",
													"pm.variables.set(\"appointment_administrators_admin_username\", \"INVALID_USERNAME\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 404\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"object\": \"appointment\",\r",
													"            \"attribute\": \"link\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"appointment_administrators_admin_username\"),\r",
													"            \"message\": \"Specified appointment does not exist\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{appointment_administrators_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "remove",
							"item": [
								{
									"name": "PREPARATION - create Appointment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-manageadministrators-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-manageadministrators-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-manageadministrators-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"\r",
													"pm.collectionVariables.set(\"PREPARATION_appointment_administrators_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "PREPARATION - add Administrator 1",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-admin-user\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_appointment_adminsitrators_administrator_username\", pm.variables.get(\"appointment_administrators_admin_username\"));"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_administrators_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								},
								{
									"name": "PREPARATION - add Administrator 2",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-admin-2-user\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_administrators_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/administrators",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Adminsitrators - success - remove",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-admin-2-user\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/administrators/{{appointment_administrators_admin_username}}?appointment={{PREPARATION_appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators",
												"{{appointment_administrators_admin_username}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_administrators_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - get manipulated appointment - manage Administrators - add",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_appointment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.administrators).to.have.lengthOf(1);\r",
													"    pm.expect(jsonData.administrators[0].username).to.eql(pm.collectionVariables.get(\"VALIDATION_appointment_adminsitrators_administrator_username\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/appointments/{{PREPARATION_appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments",
												"{{PREPARATION_appointment_administrators_link}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Adminsitrators - success - remove - valid user (but not admin)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-dummy-user\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/administrators/{{appointment_administrators_admin_username}}?appointment={{PREPARATION_appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators",
												"{{appointment_administrators_admin_username}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_administrators_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Adminsitrators - failure - remove - no permissions (as admin)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"ANY_USERNAME\");\r",
													"\r",
													"const username = pm.environment.get(\"keycloak_username_manageadministrators-admin\");\r",
													"const password = pm.environment.get(\"keycloak_password_manageadministrators-admin\");\r",
													"\r",
													"const tokenVariableName = 'bearer_manageadministrators-admin';\r",
													"const tokenExpriyDateVariableName = 'bearer_manageadministrators-admin_expiry_date';\r",
													"\r",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"link\",\r",
													"            \"in\": \"query\",\r",
													"            \"value\": pm.collectionVariables.get(\"PREPARATION_appointment_administrators_link\"),\r",
													"            \"message\": \"Specified appointment is not in your ownership. You are not allowed to manage administrators as administrator.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{bearer_manageadministrators-admin}}",
													"type": "string"
												}
											]
										},
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/administrators/{{appointment_administrators_admin_username}}?appointment={{PREPARATION_appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators",
												"{{appointment_administrators_admin_username}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_administrators_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Adminsitrators - failure - remove - not found (user)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_admin_username\", \"INVALID_USERNAME\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Satus Code 404\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"username\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"appointment_administrators_admin_username\"),\r",
													"            \"message\": \"Specified user does not exist\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/administrators/{{appointment_administrators_admin_username}}?appointment={{PREPARATION_appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators",
												"{{appointment_administrators_admin_username}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_administrators_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "manage Adminsitrators - failure - remove - not found (appointment)",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"appointment_administrators_link\", \"INVALID_LINK\")\r",
													"\r",
													"pm.variables.set(\"appointment_administrators_admin_username\", \"INVALID_USERNAME\")"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Satus Code 404\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"link\",\r",
													"            \"in\": \"query\",\r",
													"            \"value\": pm.variables.get(\"appointment_administrators_link\"),\r",
													"            \"message\": \"Specified appointment does not exist\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/administrators/{{appointment_administrators_admin_username}}?appointment={{appointment_administrators_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"administrators",
												"{{appointment_administrators_admin_username}}"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{appointment_administrators_link}}"
												}
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "PROTECTION CHECK - manage Administrators - add",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.variables.set(\"appointment_administrators_link\", \"ANY_LINK\");\r",
											"\r",
											"pm.variables.set(\"appointment_administrators_admin_username\", \"gjm-test-manageadministrators-admin-user\")"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.eql({\r",
											"        \"statusCode\": 401,\r",
											"        \"message\": \"Missing or invalid Authorization header\",\r",
											"        \"error\": \"Unauthorized\"\r",
											"    });\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{appointment_administrators_link}}\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/administrators",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"administrators"
									]
								}
							},
							"response": []
						},
						{
							"name": "PROTECTION CHECK - manage Administrators - add Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.variables.set(\"adminsitrator_username\", \"ANY_LINK\");\r",
											"pm.variables.set(\"adminsitrator_username\", \"ANY_USERNAME\")"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.eql({\r",
											"        \"statusCode\": 401,\r",
											"        \"message\": \"Missing or invalid Authorization header\",\r",
											"        \"error\": \"Unauthorized\"\r",
											"    });\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"username\": \"{{appointment_administrators_admin_username}}\",\r\n    \"appointment\": {\r\n        \"link\": \"{{appointment_administrators_link}}\"\r\n    }\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/administrators/{{adminsitrator_username}}?appointment={{appointment_link}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"administrators",
										"{{adminsitrator_username}}"
									],
									"query": [
										{
											"key": "appointment",
											"value": "{{appointment_link}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{bearer_manageadministrators}}",
								"type": "string"
							}
						]
					},
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"const username = pm.environment.get(\"keycloak_username_manageadministrators\");",
									"const password = pm.environment.get(\"keycloak_password_manageadministrators\");",
									"",
									"const tokenVariableName = 'bearer_manageadministrators';",
									"const tokenExpriyDateVariableName = 'bearer_manageadministrators_expiry_date';",
									"",
									"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
									"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "pins",
					"item": [
						{
							"name": "pin",
							"item": [
								{
									"name": "PREPARATION - create Appointment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-pins-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-pins-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-pins-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"\r",
													"pm.collectionVariables.set(\"PREPARATION_appointment_pins_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "pins - success - pin",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_pins_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/pins",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"pins"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - pins - has pinned",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "HEAD",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/pins?appointment={{PREPARATION_appointment_pins_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"pins"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_pins_link}}"
												}
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "unpin",
							"item": [
								{
									"name": "PREPARATION - create Appointment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"const moment = require('moment');\r",
													"\r",
													"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
													"var date_unix = Date.parse(date);\r",
													"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
													"var deadline_unix = Date.parse(deadline);\r",
													"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
													"\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-pins-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-pins-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-pins-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
													"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\"},\r",
													"        \"link\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\", \"link\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"const jsonData = pm.response.json();\r",
													"\r",
													"pm.collectionVariables.set(\"PREPARATION_appointment_pins_link\", jsonData.link);"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/appointments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"appointments"
											]
										}
									},
									"response": []
								},
								{
									"name": "PREPARATION - pins - success - pin",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{PREPARATION_appointment_pins_link}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/pins",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"pins"
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - pins - has pinned",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "HEAD",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/pins?appointment={{PREPARATION_appointment_pins_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"pins"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_pins_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "pins - unpin",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 204\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/pins?appointment={{PREPARATION_appointment_pins_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"pins"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_pins_link}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "VALIDATION - pins - has not pinned",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 404\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(404);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "HEAD",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/pins?appointment={{PREPARATION_appointment_pins_link}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"pins"
											],
											"query": [
												{
													"key": "appointment",
													"value": "{{PREPARATION_appointment_pins_link}}"
												}
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "PROTECTION CHECK - pins - pin",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.eql({\r",
											"        \"statusCode\": 401,\r",
											"        \"message\": \"Missing or invalid Authorization header\",\r",
											"        \"error\": \"Unauthorized\"\r",
											"    });\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/pins",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"pins"
									]
								}
							},
							"response": []
						},
						{
							"name": "PROTECTION CHECK - pins - unpin",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});\r",
											"\r",
											"pm.test(\"Correct JSON response data\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"\r",
											"    pm.expect(jsonData).to.eql({\r",
											"        \"statusCode\": 401,\r",
											"        \"message\": \"Missing or invalid Authorization header\",\r",
											"        \"error\": \"Unauthorized\"\r",
											"    });\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/pins",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"pins"
									]
								}
							},
							"response": []
						},
						{
							"name": "PROTECTION CHECK - pins - has pinned",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status Code 401\", function () {\r",
											"    pm.response.to.have.status(401);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "HEAD",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/pins",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"pins"
									]
								}
							},
							"response": []
						}
					],
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{bearer_pins}}",
								"type": "string"
							}
						]
					},
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"const username = pm.environment.get(\"keycloak_username_pins\");",
									"const password = pm.environment.get(\"keycloak_password_pins\");",
									"",
									"const tokenVariableName = 'bearer_pins';",
									"const tokenExpriyDateVariableName = 'bearer_pins_expiry_date';",
									"",
									"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
									"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				}
			]
		},
		{
			"name": "enrollments",
			"item": [
				{
					"name": "create",
					"item": [
						{
							"name": "main",
							"item": [
								{
									"name": "no auth",
									"item": [
										{
											"name": "create Enrollment - success - minimalist",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-link\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\" },\r",
															"        \"token\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_id\", jsonData.id);\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_name\", pm.variables.get(\"enrollment_creation_name\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_appointment_link\", pm.variables.get(\"enrollment_creation_appointment_link\"));\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - create Entollment - minimalist",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_id\"));\r",
															"    pm.expect(jsonData.name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_name\"));\r",
															"  \r",
															"    pm.expect(jsonData.appointment.link).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"    pm.expect(jsonData.appointment.location).to.eql(pm.environment.get(\"baseUrl\") + \"/appointments/\" + pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_creation_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_creation_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "create Enrollment - success - comment",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-link\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
															"pm.variables.set(\"enrollment_creation_comment\",  pm.globals.replaceIn(\"{{$randomPhrase}}\"));\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\" },\r",
															"        \"token\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_id\", jsonData.id);\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_comment\", pm.variables.get(\"enrollment_creation_comment\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_appointment_link\", pm.variables.get(\"enrollment_creation_appointment_link\"));\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"comment\": \"{{enrollment_creation_comment}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - create Entollment - comment",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_id\"));\r",
															"  \r",
															"    pm.expect(jsonData.appointment.link).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"    pm.expect(jsonData.appointment.location).to.eql(pm.environment.get(\"baseUrl\") + \"/appointments/\" + pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_creation_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_creation_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "create Enrollment - success - comment - trim",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-link\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
															"pm.variables.set(\"enrollment_creation_comment\",  \"                      \" + pm.globals.replaceIn(\"{{$randomPhrase}}\") + \"                      \");\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\" },\r",
															"        \"token\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_id\", jsonData.id);\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_comment\", pm.variables.get(\"enrollment_creation_comment\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_appointment_link\", pm.variables.get(\"enrollment_creation_appointment_link\"));\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"comment\": \"{{enrollment_creation_comment}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - create Entollment - comment - trim",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_id\"));\r",
															"  \r",
															"    pm.expect(jsonData.appointment.link).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"    pm.expect(jsonData.appointment.location).to.eql(pm.environment.get(\"baseUrl\") + \"/appointments/\" + pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_creation_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_creation_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "create Enrollment - failure - no mail provided",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-link\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code 401\", function () {\r",
															"    pm.response.to.have.status(401);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"UNAUTHORIZED\",\r",
															"        \"message\": \"Missing or invalid Authorization. Email or Authorization header needed\",\r",
															"        \"data\": [\r",
															"            {\r",
															"                \"attribute\": \"editMail\",\r",
															"                \"in\": \"body\",\r",
															"                \"message\": \"Provide email address for enrollment linking\"\r",
															"            },\r",
															"            {\r",
															"                \"object\": \"user\",\r",
															"                \"attribute\": \"sub\",\r",
															"                \"in\": \"authorization-header\",\r",
															"                \"message\": \"Enroll as authenticated user\"\r",
															"            }\r",
															"        ]\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"comment\": \"{{enrollment_creation_comment}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "create Enrollment - failure - appointment not found",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"INVALID_LINK\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code 404\", function () {\r",
															"    pm.response.to.have.status(404);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"NOT_FOUND\",\r",
															"        \"message\": \"Requested resource could not be located\",\r",
															"        \"data\": {\r",
															"            \"object\": \"appointment\",\r",
															"            \"attribute\": \"link\",\r",
															"            \"in\": \"body\",\r",
															"            \"value\": pm.variables.get(\"enrollment_creation_appointment_link\")\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"comment\": \"{{enrollment_creation_comment}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "create Enrollment - failure - name - in use",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-existingenrollment-link\");\r",
															"pm.variables.set(\"enrollment_creation_name\",  \"test-createenrollment-existingenrollment-name\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code 409\", function () {\r",
															"    pm.response.to.have.status(409);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"DUPLICATE_VALUES\",\r",
															"        \"message\": \"Provided values are already in use\",\r",
															"        \"data\": [{\r",
															"            \"attribute\": \"name\",\r",
															"            \"in\": \"body\",\r",
															"            \"value\": pm.variables.get(\"enrollment_creation_name\"),\r",
															"            \"message\": \"Enrollment with specified name already existing.\"\r",
															"        }]\r",
															"    })\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"comment\": \"{{enrollment_creation_comment}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "auth",
									"item": [
										{
											"name": "PREPARATION - create Appointment",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const moment = require('moment');\r",
															"\r",
															"var date = pm.globals.replaceIn('{{$randomDateFuture}}');\r",
															"var date_unix = Date.parse(date);\r",
															"var date_final = moment(date_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
															"\r",
															"var deadline = pm.globals.replaceIn('{{$randomDatePast}}');\r",
															"var deadline_unix = Date.parse(deadline);\r",
															"var deadline_final = moment(deadline_unix).format(\"YYYY-MM-DDThh:mmZ\");\r",
															"\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_title\", \"test-POSTMAN-PREPARATION-createenrollment-title-\" + pm.globals.replaceIn('{{$randomJobTitle}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_description\", \"test-POSTMAN-PREPARATION-createenrollment-description-\" +pm.globals.replaceIn('{{$randomLoremSentence}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_location\",  \"test-POSTMAN-PREPARATION-createenrollment-location-\" +pm.globals.replaceIn('{{$randomCity}}'));\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_date\",  date_final);\r",
															"pm.variables.set(\"PREPARATION_appointment_creation_deadline\",  deadline_final);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\"},\r",
															"        \"link\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\", \"link\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"const jsonData = pm.response.json();\r",
															"\r",
															"pm.collectionVariables.set(\"PREPARATION_enrollment_creation_appointment_link\", jsonData.link);"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"title\": \"{{PREPARATION_appointment_creation_title}}\",\r\n    \"description\": \"{{PREPARATION_appointment_creation_description}}\",\r\n    \"location\": \"{{PREPARATION_appointment_creation_location}}\",\r\n    \"date\": \"{{PREPARATION_appointment_creation_date}}\",\r\n    \"deadline\": \"{{PREPARATION_appointment_creation_deadline}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/appointments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"appointments"
													]
												}
											},
											"response": []
										},
										{
											"name": "create Enrollment - success - minimalist - auth",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  pm.collectionVariables.get(\"PREPARATION_enrollment_creation_appointment_link\"));\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\" },\r",
															"        \"token\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"    \r",
															"    pm.expect(jsonData).to.not.have.property(\"token\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_id\", jsonData.id);\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_appointment_link\", pm.variables.get(\"PREPARATION_enrollment_creation_appointment_link\"));\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - create Entollment - minimalist - auth",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_id\"));\r",
															"    pm.expect(jsonData).to.not.have.property(\"name\");\r",
															"\r",
															"    pm.expect(jsonData.creator).to.eql({\r",
															"        \"name\": \"GJM-TestUser CreateEnrollment-EnrollmentCreator\",\r",
															"        \"username\": \"gjm-test-createenrollment-enrollmentcreator-user\"\r",
															"    });\r",
															"  \r",
															"    pm.expect(jsonData.appointment.link).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"    pm.expect(jsonData.appointment.location).to.eql(pm.environment.get(\"baseUrl\") + \"/appointments/\" + pm.collectionVariables.get(\"VALIDATION_enrollment_creation_appointment_link\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_creation_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_creation_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "create Enrollment - failure - auth - already enrolled",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-existingenrollment-link\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status Code 409\", function () {\r",
															"    pm.response.to.have.status(409);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.code).to.eql(\"DUPLICATE_VALUES\");\r",
															"    pm.expect(jsonData.message).to.eql(\"Provided values are already in use\");\r",
															"    pm.expect(jsonData.data[0].object).to.eql(\"user\");\r",
															"    pm.expect(jsonData.data[0].attribute).to.eql(\"sub\")\r",
															"    pm.expect(jsonData.data[0].in).to.eql(\"authorization-header\");\r",
															"    pm.expect(jsonData.data[0].value).to.match(/.*/);\r",
															"    pm.expect(jsonData.data[0].message).to.eql(\"Authenticated user already enrolled\");\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										}
									],
									"auth": {
										"type": "bearer",
										"bearer": [
											{
												"key": "token",
												"value": "{{bearer_createenrollment-enrollmentcreator}}",
												"type": "string"
											}
										]
									},
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													"const username = pm.environment.get(\"keycloak_username_createenrollment-enrollmentcreator\");",
													"const password = pm.environment.get(\"keycloak_password_createenrollment-enrollmentcreator\");",
													"",
													"const tokenVariableName = 'bearer_createenrollment-enrollmentcreator';",
													"const tokenExpriyDateVariableName = 'bearer_createenrollment-enrollmentcreator_expiry_date';",
													"",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								}
							]
						},
						{
							"name": "additions",
							"item": [
								{
									"name": "create Enrollment - success - additions - 1",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-additions-link\");\r",
													"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
													"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
													"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");\r",
													"pm.variables.set(\"enrollment_creation_addition_1_id\",  \"626cceb8-916f-4132-b035-ce8eb8403510\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_1_name\",  \"test-createenrollment-additions-name-1\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\" },\r",
													"        \"token\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_1_id\", pm.variables.get(\"enrollment_creation_addition_1_id\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_1_name\", pm.variables.get(\"enrollment_creation_addition_1_name\"));\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\",\r\n    \"additions\": [{\r\n        \"id\": \"{{enrollment_creation_addition_1_id}}\"\r\n    }]\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/enrollments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VAILDATION - create Entollment - additions",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.additions[0].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_addition_1_name\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "X-Enrollment-Permission",
												"value": "{{VALIDATION_enrollment_creation_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{VALIDATION_enrollment_creation_location_header}}",
											"host": [
												"{{VALIDATION_enrollment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Enrollment - success - additions - 2",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-additions-link\");\r",
													"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
													"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
													"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_1_id\",  \"626cceb8-916f-4132-b035-ce8eb8403510\");\r",
													"pm.variables.set(\"enrollment_creation_addition_1_name\",  \"test-createenrollment-additions-name-1\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_3_id\",  \"c96e5fe9-a648-4171-92d4-9c7e96c8ccbf\");\r",
													"pm.variables.set(\"enrollment_creation_addition_3_name\",  \"test-createenrollment-additions-name-3\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\" },\r",
													"        \"token\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_1_id\", pm.variables.get(\"enrollment_creation_addition_1_id\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_1_name\", pm.variables.get(\"enrollment_creation_addition_1_name\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_3_id\", pm.variables.get(\"enrollment_creation_addition_3_id\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_3_name\", pm.variables.get(\"enrollment_creation_addition_3_name\"));"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\",\r\n    \"additions\": [{\r\n        \"id\": \"{{enrollment_creation_addition_1_id}}\"\r\n    }, {\r\n        \"id\": \"{{enrollment_creation_addition_3_id}}\"\r\n    }]\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/enrollments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VAILDATION - create Entollment - additions",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.additions[0].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_addition_1_name\"));\r",
													"    pm.expect(jsonData.additions[1].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_addition_3_name\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "X-Enrollment-Permission",
												"value": "{{VALIDATION_enrollment_creation_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{VALIDATION_enrollment_creation_location_header}}",
											"host": [
												"{{VALIDATION_enrollment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Enrollment - success - additions - all",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-additions-link\");\r",
													"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
													"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
													"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_1_id\",  \"626cceb8-916f-4132-b035-ce8eb8403510\");\r",
													"pm.variables.set(\"enrollment_creation_addition_1_name\",  \"test-createenrollment-additions-name-1\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_2_id\",  \"b190aa03-72d1-4687-8579-0fed36aa78a4\");\r",
													"pm.variables.set(\"enrollment_creation_addition_2_name\",  \"test-createenrollment-additions-name-2\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_3_id\",  \"c96e5fe9-a648-4171-92d4-9c7e96c8ccbf\");\r",
													"pm.variables.set(\"enrollment_creation_addition_3_name\",  \"test-createenrollment-additions-name-3\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_4_id\",  \"e828a2bc-8f00-4926-affc-5dc98b322f12\");\r",
													"pm.variables.set(\"enrollment_creation_addition_4_name\",  \"test-createenrollment-additions-name-4\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\" },\r",
													"        \"token\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_1_id\", pm.variables.get(\"enrollment_creation_addition_1_id\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_1_name\", pm.variables.get(\"enrollment_creation_addition_1_name\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_2_id\", pm.variables.get(\"enrollment_creation_addition_2_id\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_2_name\", pm.variables.get(\"enrollment_creation_addition_2_name\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_3_id\", pm.variables.get(\"enrollment_creation_addition_3_id\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_3_name\", pm.variables.get(\"enrollment_creation_addition_3_name\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_4_id\", pm.variables.get(\"enrollment_creation_addition_4_id\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_addition_4_name\", pm.variables.get(\"enrollment_creation_addition_4_name\"));\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\",\r\n    \"additions\": [{\r\n        \"id\": \"{{enrollment_creation_addition_1_id}}\"\r\n    }, {\r\n        \"id\": \"{{enrollment_creation_addition_2_id}}\"\r\n    }, {\r\n        \"id\": \"{{enrollment_creation_addition_3_id}}\"\r\n    }, {\r\n        \"id\": \"{{enrollment_creation_addition_4_id}}\"\r\n    }]\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/enrollments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VAILDATION - create Entollment - additions",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData.additions[0].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_addition_1_name\"));\r",
													"    pm.expect(jsonData.additions[1].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_addition_2_name\"));\r",
													"    pm.expect(jsonData.additions[2].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_addition_3_name\"));\r",
													"    pm.expect(jsonData.additions[3].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_addition_4_name\"));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "X-Enrollment-Permission",
												"value": "{{VALIDATION_enrollment_creation_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{VALIDATION_enrollment_creation_location_header}}",
											"host": [
												"{{VALIDATION_enrollment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Enrollment - failure - additions - addition not found",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-additions-link\");\r",
													"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
													"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
													"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");\r",
													"pm.variables.set(\"enrollment_creation_addition_1_id\",  \"INVALID_ID\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_addition_1_name\",  \"test-createenrollment-additions-name-1\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 404\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"NOT_FOUND\",\r",
													"        \"message\": \"Requested resource could not be located\",\r",
													"        \"data\": {\r",
													"            \"object\": \"addition\",\r",
													"            \"attribute\": \"id\",\r",
													"            \"in\": \"body\",\r",
													"            \"value\": pm.variables.get(\"enrollment_creation_addition_1_id\"),\r",
													"            \"message\": \"Specified addition does not exist in this appointment\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\",\r\n    \"additions\": [{\r\n        \"id\": \"{{enrollment_creation_addition_1_id}}\"\r\n    }]\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/enrollments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "driverAddition",
							"item": [
								{
									"name": "create Enrollment - success - driverAddition - driver",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-driverAddition-link\");\r",
													"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
													"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
													"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_driver_service\",  \"1\");\r",
													"pm.variables.set(\"enrollment_creation_driver_seats\",  \"4\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\" },\r",
													"        \"token\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_driver_service\", pm.variables.get(\"enrollment_creation_driver_service\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_driver_seats\", pm.variables.get(\"enrollment_creation_driver_seats\"));\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\",\r\n    \"driver\": {\r\n        \"seats\": \"{{enrollment_creation_driver_seats}}\",\r\n        \"service\": \"{{enrollment_creation_driver_service}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/enrollments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VAILDATION - create Entollment - driverAddition - driver",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.not.have.property(\"passenger\");\r",
													"    pm.expect(jsonData.driver.seats).to.eql(Number(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_driver_seats\")));\r",
													"    pm.expect(jsonData.driver.service).to.eql(Number(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_driver_service\")));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "X-Enrollment-Permission",
												"value": "{{VALIDATION_enrollment_creation_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{VALIDATION_enrollment_creation_location_header}}",
											"host": [
												"{{VALIDATION_enrollment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Enrollment - success - driverAddition - passenger",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-driverAddition-link\");\r",
													"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
													"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
													"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");\r",
													"\r",
													"pm.variables.set(\"enrollment_creation_passenger_requirement\",  \"1\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Successful POST request\", function () {\r",
													"    pm.response.to.have.status(201);\r",
													"});\r",
													"\r",
													"const schema = {\r",
													"    \"type\": \"object\",\r",
													"    \"properties\": {\r",
													"        \"id\": { \"type\": \"string\" },\r",
													"        \"token\": { \"type\": \"string\" }\r",
													"    },\r",
													"    \"required\": [\"id\"],\r",
													"    \"additionalProperties\": false\r",
													"};\r",
													"\r",
													"pm.test(\"Validate schema\", () => {\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"var jsonData = pm.response.json();\r",
													"\r",
													"pm.test(\"Location header is present\", function () {\r",
													"    pm.response.to.have.header(\"Location\");\r",
													"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
													"});\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_location_header\", pm.response.headers.get(\"Location\"));\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_token\", jsonData.token);\r",
													"\r",
													"pm.collectionVariables.set(\"VALIDATION_enrollment_creation_passenger_requirement\", pm.variables.get(\"enrollment_creation_passenger_requirement\"));\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\",\r\n    \"passenger\": {\r\n        \"requirement\": \"{{enrollment_creation_passenger_requirement}}\"\r\n    }\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/enrollments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments"
											]
										}
									},
									"response": []
								},
								{
									"name": "VAILDATION - create Entollment - driverAddition - passenger",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status code is 200\", function () {\r",
													"    pm.expect(pm.response.code).to.equal(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Valid schema\", () => {\r",
													"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
													"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
													"\r",
													"    pm.response.to.have.jsonSchema(schema);\r",
													"});\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    const jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.not.have.property(\"driver\");\r",
													"    pm.expect(jsonData.passenger.requirement).to.eql(Number(pm.collectionVariables.get(\"VALIDATION_enrollment_creation_passenger_requirement\")));\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "X-Enrollment-Permission",
												"value": "{{VALIDATION_enrollment_creation_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{VALIDATION_enrollment_creation_location_header}}",
											"host": [
												"{{VALIDATION_enrollment_creation_location_header}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "create Enrollment - failure - driverAddition - not provided",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-createenrollment-driverAddition-link\");\r",
													"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
													"pm.variables.set(\"enrollment_creation_name\",  pm.globals.replaceIn(\"{{$randomUserName}}\"));\r",
													"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentcreation@testing.go-join.me\");"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 400\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"MISSING_VALUES\",\r",
													"        \"message\": \"Please specify one of the following values\",\r",
													"        \"data\": [\r",
													"            \"driver\",\r",
													"            \"passenger\"\r",
													"        ]\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"name\": \"{{enrollment_creation_name}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/enrollments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "{id}",
					"item": [
						{
							"name": "update",
							"item": [
								{
									"name": "main (permissions checks)",
									"item": [
										{
											"name": "update Enrollment - success - enrollment creator",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const username = pm.environment.get(\"keycloak_username_updateenrollment-enrollmentcreator\");\r",
															"const password = pm.environment.get(\"keycloak_password_updateenrollment-enrollmentcreator\");\r",
															"\r",
															"const tokenVariableName = 'bearer_updateenrollment-enrollmentcreator';\r",
															"const tokenExpriyDateVariableName = 'bearer_updateenrollment-enrollmentcreator_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_comment\", pm.variables.get('enrollment_update_comment_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_updateenrollment-enrollmentcreator}}",
															"type": "string"
														}
													]
												},
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_comment_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment - enrollment creator",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"  \r",
															"    pm.expect(jsonData.comment).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_comment\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - success - appointment creator",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const username = pm.environment.get(\"keycloak_username_updateenrollment-appointmentcreator\");\r",
															"const password = pm.environment.get(\"keycloak_password_updateenrollment-appointmentcreator\");\r",
															"\r",
															"const tokenVariableName = 'bearer_updateenrollment-appointmentcreator';\r",
															"const tokenExpriyDateVariableName = 'bearer_updateenrollment-appointmentcreator_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_comment\", pm.variables.get('enrollment_update_comment_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_updateenrollment-appointmentcreator}}",
															"type": "string"
														}
													]
												},
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_comment_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment - appointment creator",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.comment).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_comment\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - success - appointment admin",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const username = pm.environment.get(\"keycloak_username_updateenrollment-appointmentadmin\");\r",
															"const password = pm.environment.get(\"keycloak_password_updateenrollment-appointmentadmin\");\r",
															"\r",
															"const tokenVariableName = 'bearer_updateenrollment-appointmentadmin';\r",
															"const tokenExpriyDateVariableName = 'bearer_updateenrollment-appointmentadmin_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_comment\", pm.variables.get('enrollment_update_comment_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_updateenrollment-appointmentadmin}}",
															"type": "string"
														}
													]
												},
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_comment_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment - appointment admin",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.comment).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_comment\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - success - enrollment token",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_comment\", pm.variables.get('enrollment_update_comment_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "PUT",
												"header": [
													{
														"key": "x-enrollment-token",
														"value": "{{enrollment_update_token}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_comment_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment - appointment admin Copy",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.comment).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_comment\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - failure - any user",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"const username = pm.environment.get(\"keycloak_username_updateenrollment-regularuser\");\r",
															"const password = pm.environment.get(\"keycloak_password_updateenrollment-regularuser\");\r",
															"\r",
															"const tokenVariableName = 'bearer_updateenrollment-regularuser';\r",
															"const tokenExpriyDateVariableName = 'bearer_updateenrollment-regularuser_expiry_date';\r",
															"\r",
															"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));\r",
															"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code 403\", function () {\r",
															"    pm.response.to.have.status(403);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"    \r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
															"        \"message\": \"Missing permissions to execute request\",\r",
															"        \"data\": {\r",
															"            \"attribute\": \"id\",\r",
															"            \"in\": \"path\",\r",
															"            \"value\": pm.variables.get(\"enrollment_update_id\"),\r",
															"            \"message\": \"Specified enrollment is not in your ownership. You are also not permitted by being a manager of the related appointment.\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "bearer",
													"bearer": [
														{
															"key": "token",
															"value": "{{bearer_updateenrollment-regularuser}}",
															"type": "string"
														}
													]
												},
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_comment_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - failure - no permission",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code 403\", function () {\r",
															"    pm.response.to.have.status(403);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"    \r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
															"        \"message\": \"Missing permissions to execute request\",\r",
															"        \"data\": {\r",
															"            \"attribute\": \"id\",\r",
															"            \"in\": \"path\",\r",
															"            \"value\": pm.variables.get(\"enrollment_update_id\"),\r",
															"            \"message\": \"Specified enrollment is not in your ownership. You are also not permitted by being a manager of the related appointment.\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "PUT",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_comment_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										}
									],
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													"pm.variables.set(\"enrollment_update_id\", \"1f4815c0-a38a-4f72-a1ad-9f36f61494cf\"); // ENROLLMENT CREATED BY USER",
													"pm.variables.set(\"enrollment_update_comment_new\", pm.globals.replaceIn(\"{{$randomPhrase}}\"));",
													"pm.variables.set(\"enrollment_update_token\", \"857f0ad939769f7ea3a1c0385521823214171b9fe6edd1b585de45b894af9f23\")"
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								},
								{
									"name": "name",
									"item": [
										{
											"name": "update Enrollment - success - name",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_name_new\", \"test-POSTMAN-enrollmentupdate-name-new-\" + pm.globals.replaceIn(\"{{$randomUserName}}\"))"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_name\", pm.variables.get('enrollment_update_name_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"name\": \"{{enrollment_update_name_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment - name",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"    pm.expect(jsonData.name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_name\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - failure - name - in use",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_name_new\", \"test-updateenrollment-existingname-name\")"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code 400\", function () {\r",
															"    pm.response.to.have.status(400);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"    \r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"DUPLICATE_ENTRY\",\r",
															"        \"message\": \"Following values are duplicates and can not be used\",\r",
															"        \"data\": [\r",
															"            {\r",
															"                \"attribute\": \"name\",\r",
															"                \"in\": \"body\",\r",
															"                \"value\": pm.variables.get(\"enrollment_update_name_new\"),\r",
															"                \"message\": \"The specified name is already used by another enrollment. A person can only be enrolled once.\"\r",
															"            }\r",
															"        ]\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"name\": \"{{enrollment_update_name_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - failure - name - can not update name of enrollment created by user",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_id\", \"1f4815c0-a38a-4f72-a1ad-9f36f61494cf\");\r",
															"\r",
															"pm.variables.set(\"enrollment_update_name_new\", \"test-POSTMAN-enrollmentupdate-name-new-\" + pm.globals.replaceIn(\"{{$randomUserName}}\"))"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code 422\", function () {\r",
															"    pm.response.to.have.status(422);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"    \r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"INVALID_ATTRIBUTE\",\r",
															"        \"message\": \"Following attributes are not allowed to be updated\",\r",
															"        \"data\": [\r",
															"            {\r",
															"                \"attribute\": \"name\",\r",
															"                \"in\": \"body\",\r",
															"                \"value\": pm.variables.get(\"enrollment_update_name_new\"),\r",
															"                \"message\": \"The specified enrollment got created by an authenticated user. Thus the name can not be modified.\"\r",
															"            }\r",
															"        ]\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"name\": \"{{enrollment_update_name_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										}
									],
									"auth": {
										"type": "bearer",
										"bearer": [
											{
												"key": "token",
												"value": "{{bearer_updateenrollment-appointmentcreator}}",
												"type": "string"
											}
										]
									},
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													"pm.variables.set(\"enrollment_update_id\", \"36aa22e6-43cf-42c1-a10b-8a4de1460e0d\");",
													"",
													"const username = pm.environment.get(\"keycloak_username_updateenrollment-appointmentcreator\");",
													"const password = pm.environment.get(\"keycloak_password_updateenrollment-appointmentcreator\");",
													"",
													"const tokenVariableName = 'bearer_updateenrollment-appointmentcreator';",
													"const tokenExpriyDateVariableName = 'bearer_updateenrollment-appointmentcreator_expiry_date';",
													"",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								},
								{
									"name": "comment",
									"item": [
										{
											"name": "update Enrollment - success - comment",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_comment_new\", \"test-POSTMAN-enrollmentupdate-comment-new-\" + pm.globals.replaceIn(\"{{$randomPhrase}}\"))"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_comment\", pm.variables.get('enrollment_update_comment_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_comment_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"  \r",
															"    pm.expect(jsonData.comment).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_comment\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - success - comment - trim",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_comment_new\", \"test-POSTMAN-enrollmentupdate-comment-new-\" + pm.globals.replaceIn(\"{{$randomPhrase}}\"))"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_comment\", pm.variables.get('enrollment_update_comment_new'));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"                       {{enrollment_update_comment_new}}                              \"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"\r",
															"  \r",
															"    pm.expect(jsonData.comment).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_comment\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - success - comment - trim (change to null)",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_name_new\", \"                       \");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"comment\": \"{{enrollment_update_name_new}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VAILDATION - update Entollment",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"  \r",
															"    pm.expect(jsonData).to.not.have.property(\"comment\");\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										}
									],
									"auth": {
										"type": "bearer",
										"bearer": [
											{
												"key": "token",
												"value": "{{bearer_updateenrollment-appointmentcreator}}",
												"type": "string"
											}
										]
									},
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													"pm.variables.set(\"enrollment_update_id\", \"36aa22e6-43cf-42c1-a10b-8a4de1460e0d\");",
													"",
													"const username = pm.environment.get(\"keycloak_username_updateenrollment-appointmentcreator\");",
													"const password = pm.environment.get(\"keycloak_password_updateenrollment-appointmentcreator\");",
													"",
													"const tokenVariableName = 'bearer_updateenrollment-appointmentcreator';",
													"const tokenExpriyDateVariableName = 'bearer_updateenrollment-appointmentcreator_expiry_date';",
													"",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								},
								{
									"name": "additions",
									"item": [
										{
											"name": "PREPARATION - create Enrollment - success - additions (no additions)",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-updateenrollment-additions-link\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentupdate@testing.go-join.me\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\" },\r",
															"        \"token\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"PREPARATION_enrollment_creation_id\", jsonData.id);\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\"\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - success - additions - add two",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_additions_addition_1_name\", \"test-updateenrollment-additions-name-1\");\r",
															"pm.variables.set(\"enrollment_update_additions_addition_1_id\", \"47c04799-b6e4-4160-abd0-49c046d1a8e8\");\r",
															"pm.variables.set(\"enrollment_update_additions_addition_2_name\", \"test-updateenrollment-additions-name-2\");\r",
															"pm.variables.set(\"enrollment_update_additions_addition_2_id\", \"0e352275-6e92-474c-b5af-9810b000d8bb\")\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_additions_addition_1_name\", pm.variables.get(\"enrollment_update_additions_addition_1_name\"));\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_additions_addition_2_name\", pm.variables.get(\"enrollment_update_additions_addition_2_name\"));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"additions\": [\r\n        {\r\n            \"id\": \"{{enrollment_update_additions_addition_1_id}}\"\r\n        }, {\r\n            \"id\": \"{{enrollment_update_additions_addition_2_id}}\"\r\n        }\r\n    ]\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{PREPARATION_enrollment_creation_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{PREPARATION_enrollment_creation_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VALIDATION - update Entollment - additions - add two",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"  \r",
															"    pm.expect(jsonData.additions).to.have.lengthOf(2);\r",
															"\r",
															"    pm.expect(jsonData.additions.sort()[0].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_additions_addition_1_name\"));\r",
															"    pm.expect(jsonData.additions.sort()[1].name).to.eql(pm.collectionVariables.get(\"VALIDATION_enrollment_update_additions_addition_2_name\"));\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "PREPARATION - create Enrollment - success - additions (two additions)",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_creation_appointment_link\",  \"test-updateenrollment-additions-link\");\r",
															"pm.variables.set(\"enrollment_creation_domain\",  \"https://testing.go-join.me/{{0}}/{{1}}\");\r",
															"pm.variables.set(\"enrollment_creation_editMail\",  \"enrollmentupdate@testing.go-join.me\");\r",
															"\r",
															"pm.variables.set(\"enrollment_update_additions_addition_1_id\", \"47c04799-b6e4-4160-abd0-49c046d1a8e8\");\r",
															"pm.variables.set(\"enrollment_update_additions_addition_2_id\", \"0e352275-6e92-474c-b5af-9810b000d8bb\")"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Successful POST request\", function () {\r",
															"    pm.response.to.have.status(201);\r",
															"});\r",
															"\r",
															"const schema = {\r",
															"    \"type\": \"object\",\r",
															"    \"properties\": {\r",
															"        \"id\": { \"type\": \"string\" },\r",
															"        \"token\": { \"type\": \"string\" }\r",
															"    },\r",
															"    \"required\": [\"id\"],\r",
															"    \"additionalProperties\": false\r",
															"};\r",
															"\r",
															"pm.test(\"Validate schema\", () => {\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"var jsonData = pm.response.json();\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"    pm.response.to.be.header(\"Location\", pm.environment.get(\"baseUrl\") + \"/enrollments/\" + jsonData.id);\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"PREPARATION_enrollment_creation_id\", jsonData.id);\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"auth": {
													"type": "noauth"
												},
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"appointment\": {\r\n        \"link\": \"{{enrollment_creation_appointment_link}}\"\r\n    },\r\n    \"domain\": \"{{enrollment_creation_domain}}\",\r\n    \"editMail\": \"{{enrollment_creation_editMail}}\",\r\n    \"additions\": [\r\n        {\r\n            \"id\": \"{{enrollment_update_additions_addition_1_id}}\"\r\n        }, {\r\n            \"id\": \"{{enrollment_update_additions_addition_2_id}}\"\r\n        }\r\n    ]\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - success - additions - remove all",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 204\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(204);\r",
															"});\r",
															"\r",
															"pm.test(\"Location header is present\", function () {\r",
															"    pm.response.to.have.header(\"Location\");\r",
															"});\r",
															"\r",
															"pm.collectionVariables.set(\"VALIDATION_enrollment_update_location_header\", pm.response.headers.get(\"Location\"));"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"additions\": []\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{PREPARATION_enrollment_creation_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{PREPARATION_enrollment_creation_id}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "VALIDATION - update Entollment - additions - add two Copy",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code is 200\", function () {\r",
															"    pm.expect(pm.response.code).to.equal(200);\r",
															"});\r",
															"\r",
															"pm.test(\"Valid schema\", () => {\r",
															"    const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));\r",
															"    const schema = JSON.parse(getSchemaString(\"schema_enrollment\"));\r",
															"\r",
															"    pm.response.to.have.jsonSchema(schema);\r",
															"});\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    const jsonData = pm.response.json();\r",
															"  \r",
															"    pm.expect(jsonData).to.not.have.property('additions');\r",
															"});"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "X-Enrollment-Permission",
														"value": "{{VALIDATION_enrollment_creation_token}}",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{VALIDATION_enrollment_update_location_header}}",
													"host": [
														"{{VALIDATION_enrollment_update_location_header}}"
													]
												}
											},
											"response": []
										},
										{
											"name": "update Enrollment - failure - additions - invalid addititon",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"enrollment_update_additions_id\", \"9dd1e2c9-416f-4e47-963c-f6c916b13f3b\");\r",
															"\r",
															"pm.variables.set(\"enrollment_update_additions_addition_1_id\", \"INVALID_ADDTION_ID\");"
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"pm.test(\"Status code 404\", function () {\r",
															"    pm.response.to.have.status(404);\r",
															"});\r",
															"\r",
															"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
															"testSchema(pm.response);\r",
															"\r",
															"pm.test(\"Correct JSON response data\", function () {\r",
															"    var jsonData = pm.response.json();\r",
															"    \r",
															"    pm.expect(jsonData).to.eql({\r",
															"        \"code\": \"NOT_FOUND\",\r",
															"        \"message\": \"Requested resource could not be located\",\r",
															"        \"data\": {\r",
															"            \"object\": \"addition\",\r",
															"            \"attribute\": \"id\",\r",
															"            \"in\": \"body\",\r",
															"            \"value\": pm.variables.get(\"enrollment_update_additions_addition_1_id\"),\r",
															"            \"message\": \"Specified addition does not exist in this appointment\"\r",
															"        }\r",
															"    });\r",
															"});"
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PUT",
												"header": [
													{
														"key": "",
														"value": "",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"additions\": [\r\n        {\r\n            \"id\": \"{{enrollment_update_additions_addition_1_id}}\"\r\n        }\r\n    ]\r\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{baseUrl}}/enrollments/{{enrollment_update_additions_id}}",
													"host": [
														"{{baseUrl}}"
													],
													"path": [
														"enrollments",
														"{{enrollment_update_additions_id}}"
													]
												}
											},
											"response": []
										}
									],
									"auth": {
										"type": "bearer",
										"bearer": [
											{
												"key": "token",
												"value": "{{bearer_updateenrollment-appointmentcreator}}",
												"type": "string"
											}
										]
									},
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													"const username = pm.environment.get(\"keycloak_username_updateenrollment-appointmentcreator\");",
													"const password = pm.environment.get(\"keycloak_password_updateenrollment-appointmentcreator\");",
													"",
													"const tokenVariableName = 'bearer_updateenrollment-appointmentcreator';",
													"const tokenExpriyDateVariableName = 'bearer_updateenrollment-appointmentcreator_expiry_date';",
													"",
													"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
													"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								},
								{
									"name": "__driverAddition",
									"item": []
								}
							]
						},
						{
							"name": "__get",
							"item": []
						}
					]
				},
				{
					"name": "__delete",
					"item": []
				},
				{
					"name": "permissions",
					"item": [
						{
							"name": "as appointment creator",
							"item": [
								{
									"name": "check Permission - success - enrollment by user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", '13fe4f6c-b1ef-4b94-8e3c-95ee95e3efb5');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								},
								{
									"name": "check Permission - success - enrollment by unknown",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", 'cde285ef-b0b0-466c-86a9-bf146a39b59d');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "bearer",
								"bearer": [
									{
										"key": "token",
										"value": "{{bearer_enrollmentpermission-appointmentcreator}}",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const username = pm.environment.get(\"keycloak_username_enrollmentpermission-appointmentcreator\");",
											"const password = pm.environment.get(\"keycloak_password_enrollmentpermission-appointmentcreator\");",
											"",
											"const tokenVariableName = 'bearer_enrollmentpermission-appointmentcreator';",
											"const tokenExpriyDateVariableName = 'bearer_enrollmentpermission-appointmentcreator_expiry_date';",
											"",
											"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
											"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "as appointment admin",
							"item": [
								{
									"name": "check Permission - success - enrollment by user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", '13fe4f6c-b1ef-4b94-8e3c-95ee95e3efb5');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								},
								{
									"name": "check Permission - success - enrollment by unknown",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", 'cde285ef-b0b0-466c-86a9-bf146a39b59d');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "bearer",
								"bearer": [
									{
										"key": "token",
										"value": "{{bearer_enrollmentpermission-appointmentadmin}}",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const username = pm.environment.get(\"keycloak_username_enrollmentpermission-appointmentadmin\");",
											"const password = pm.environment.get(\"keycloak_password_enrollmentpermission-appointmentadmin\");",
											"",
											"const tokenVariableName = 'bearer_enrollmentpermission-appointmentadmin';",
											"const tokenExpriyDateVariableName = 'bearer_enrollmentpermission-appointmentadmi_expiry_date';",
											"",
											"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
											"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "as enrollment creator",
							"item": [
								{
									"name": "check Permission - success - enrollment by user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", '13fe4f6c-b1ef-4b94-8e3c-95ee95e3efb5');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								},
								{
									"name": "check Permission - success - enrollment by unknown",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", 'cde285ef-b0b0-466c-86a9-bf146a39b59d');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"id\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"enrollment_permission_id\"),\r",
													"            \"message\": \"Specified enrollment is not in your ownership. You are also not permitted by being a manager of the related appointment.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "bearer",
								"bearer": [
									{
										"key": "token",
										"value": "{{bearer_enrollmentpermission-enrollmentcreator}}",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const username = pm.environment.get(\"keycloak_username_enrollmentpermission-enrollmentcreator\");",
											"const password = pm.environment.get(\"keycloak_password_enrollmentpermission-enrollmentcreator\");",
											"",
											"const tokenVariableName = 'bearer_enrollmentpermission-enrollmentcreator';",
											"const tokenExpriyDateVariableName = 'bearer_enrollmentpermission-enrollmentcreator_expiry_date';",
											"",
											"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
											"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "as authenticated user",
							"item": [
								{
									"name": "check Permission - success - enrollment by user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", '13fe4f6c-b1ef-4b94-8e3c-95ee95e3efb5');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"id\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"enrollment_permission_id\"),\r",
													"            \"message\": \"Specified enrollment is not in your ownership. You are also not permitted by being a manager of the related appointment.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								},
								{
									"name": "check Permission - success - enrollment by unknown",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", 'cde285ef-b0b0-466c-86a9-bf146a39b59d');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"id\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"enrollment_permission_id\"),\r",
													"            \"message\": \"Specified enrollment is not in your ownership. You are also not permitted by being a manager of the related appointment.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								}
							],
							"auth": {
								"type": "bearer",
								"bearer": [
									{
										"key": "token",
										"value": "{{bearer_enrollmentpermission-regularuser}}",
										"type": "string"
									}
								]
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const username = pm.environment.get(\"keycloak_username_enrollmentpermission-regularuser\");",
											"const password = pm.environment.get(\"keycloak_password_enrollmentpermission-regularuser\");",
											"",
											"const tokenVariableName = 'bearer_enrollmentpermission-regularuser';",
											"const tokenExpriyDateVariableName = 'bearer_enrollmentpermission-regularuser_expiry_date';",
											"",
											"const generateAccessTokenIfNeeded = eval(pm.globals.get(\"function_generateAccessTokenIfNeeded\"));",
											"generateAccessTokenIfNeeded(username, password, tokenVariableName, tokenExpriyDateVariableName);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							]
						},
						{
							"name": "unauthenticated",
							"item": [
								{
									"name": "check Permission - success - enrollment by user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", '13fe4f6c-b1ef-4b94-8e3c-95ee95e3efb5');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"id\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"enrollment_permission_id\"),\r",
													"            \"message\": \"Specified enrollment is not in your ownership. You are also not permitted by being a manager of the related appointment.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								},
								{
									"name": "check Permission - success - enrollment by unknown",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", 'cde285ef-b0b0-466c-86a9-bf146a39b59d');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 403\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"const testSchema = eval(pm.globals.get(\"test_correctErrorResponseSchema\"));\r",
													"testSchema(pm.response);\r",
													"\r",
													"pm.test(\"Correct JSON response data\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"\r",
													"    pm.expect(jsonData).to.eql({\r",
													"        \"code\": \"INSUFFICIENT_PERMISSIONS\",\r",
													"        \"message\": \"Missing permissions to execute request\",\r",
													"        \"data\": {\r",
													"            \"attribute\": \"id\",\r",
													"            \"in\": \"path\",\r",
													"            \"value\": pm.variables.get(\"enrollment_permission_id\"),\r",
													"            \"message\": \"Specified enrollment is not in your ownership. You are also not permitted by being a manager of the related appointment.\"\r",
													"        }\r",
													"    });\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "permission token",
							"item": [
								{
									"name": "check Permission - success - enrollment by user",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", '13fe4f6c-b1ef-4b94-8e3c-95ee95e3efb5');\r",
													"pm.variables.set(\"enrollment_permission_token\", 'fea4fd82366cdd4acfe4a536df9115bd02f9b5795bce4ee9656896787339aa65');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-enrollment-token",
												"value": "{{enrollment_permission_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								},
								{
									"name": "check Permission - success - enrollment by unknown",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"enrollment_permission_id\", 'cde285ef-b0b0-466c-86a9-bf146a39b59d');\r",
													"pm.variables.set(\"enrollment_permission_token\", 'a24c8782cf921c9dc89e664cf44935fb37aafd07642f00ed56575f867ec2259d');"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status Code 204\", function () {\r",
													"    pm.response.to.have.status(204);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-enrollment-token",
												"value": "{{enrollment_permission_token}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/enrollments/{{enrollment_permission_id}}/check-permission",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"enrollments",
												"{{enrollment_permission_id}}",
												"check-permission"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"postman.setGlobalVariable(\"function_generateAccessTokenIfNeeded\",",
					" (username, password, tokenVariableName, tokenExpriyDateVariableName) => {",
					"    var t = new Date();",
					"",
					"    if(!pm.collectionVariables.get(tokenExpriyDateVariableName)",
					"       || pm.collectionVariables.get(tokenExpriyDateVariableName) < t.toISOString()",
					"       || !pm.collectionVariables.get(tokenVariableName)) {",
					"        var server       = pm.environment.get(\"keycloak_url\")",
					"        var realm        = pm.environment.get(\"keycloak_realm\")",
					"        var grantType    = \"password\";",
					"        var clientId     = pm.environment.get(\"keycloak_client_id\")",
					"        var clientSecret = pm.environment.get(\"keycloak_client_secret\");",
					"",
					"        var url  = `${server}/auth/realms/${realm}/protocol/openid-connect/token`;",
					"        var data = `grant_type=${grantType}&client_id=${clientId}&username=${username}&password=${password}&client_secret=${clientSecret}`;",
					"",
					"        pm.sendRequest({",
					"            url: url,",
					"            method: 'POST',",
					"            header: { 'Content-Type': 'application/x-www-form-urlencoded'},",
					"            body: {",
					"                mode: 'raw',",
					"                raw: data",
					"            }",
					"        },  function(err, response) {",
					"            var response_json = response.json();",
					"            var token = response_json.access_token;",
					"            pm.collectionVariables.set(tokenVariableName, token);",
					"",
					"            var t = new Date();",
					"            t.setSeconds(t.getSeconds() + response_json.expires_in);",
					"",
					"            pm.collectionVariables.set(tokenExpriyDateVariableName, t);",
					"        });",
					"    }",
					"});",
					"",
					"postman.setGlobalVariable(\"test_correctErrorResponseSchema\", (response) => {",
					"    const schema = JSON.parse(pm.collectionVariables.get(\"schema_error\"));",
					"",
					"    pm.test(\"Validate schema\", () => {",
					"        response.to.have.jsonSchema(schema);",
					"    });",
					"});",
					"",
					"postman.setGlobalVariable(\"function_getSchemaStringRecursively\",",
					" (schemaName) => {",
					"    let schema = pm.variables.get(schemaName);",
					"",
					"    let myRegexp = new RegExp(\"\\\\#\\\\#REPLACE_SCHEMA\\\\((schema_.*)\\\\)\\\\#\\\\#\", \"gm\");",
					"    while ((match = myRegexp.exec(schema)) !== null) {",
					"        const subSchemaName = match[1];",
					"        const getSchemaString = eval(pm.globals.get(\"function_getSchemaStringRecursively\"));",
					"        const subSchema = getSchemaString(subSchemaName);",
					"        ",
					"        schema = schema.replace(\"##REPLACE_SCHEMA(\" + subSchemaName + \")##\", subSchema);",
					"    }",
					"    ",
					"    return schema;",
					"});"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "schema_appointment",
			"value": "{\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"relations\": {\n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": { \"type\": \"string\" }\n\t\t},\n\t\t\"id\": { \"type\": \"string\" },\n\t\t\"title\": { \"type\": \"string\" },\n\t\t\"description\": { \"type\": \"string\" },\n\t\t\"link\": { \"type\": \"string\" },\n\t\t\"location\": { \"type\": \"string\" },\n\t\t\"date\": { \n\t\t\t\"type\": \"string\",\n\t\t\t\"format\": \"date-time\"    \n\t\t},\n\t\t\"deadline\": { \n\t\t\t\"type\": \"string\",\n\t\t\t\"format\": \"date-time\"    \n\t\t},\n\t\t\"creator\": ##REPLACE_SCHEMA(schema_user_minified)##,\n\t\t\"maxEnrollments\": { \"type\": \"number\" },\n\t\t\"hidden\": { \"type\": \"boolean\" },\n\t\t\"driverAddition\": { \"type\": \"boolean\" },\n\t\t\"additions\": { \n\t\t\t\"type\": \"array\" ,\n\t\t\t\"items\": ##REPLACE_SCHEMA(schema_addition)##\n\t\t},\n\t\t\"files\": { \n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": ##REPLACE_SCHEMA(schema_file)##\n\t\t},\n\t\t\"administrators\": { \n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": ##REPLACE_SCHEMA(schema_user_minified)##\n\t\t},\n\t\t\"enrollments\": { \n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": ##REPLACE_SCHEMA(schema_enrollment)##\n\t\t},\n\t\t\"iat\": { \n\t\t\t\"type\": \"string\",\n\t\t\t\"format\": \"date-time\"    \n\t\t},\n\t\t\"lud\": { \n\t\t\t\"type\": \"string\",\n\t\t\t\"format\": \"date-time\"    \n\t\t}\n\t},\n\t\"required\": [ \"id\", \"title\", \"description\", \"link\", \"location\", \"date\", \"deadline\", \"hidden\", \"driverAddition\", \"creator\" ],\n\t\"additionalProperties\": false\n}"
		},
		{
			"key": "schema_user_minified",
			"value": "{ \n\t\t\t\"type\": \"object\",\n\t\t\t\"properties\": {\n\t\t\t\t\"name\": { \"type\": \"string\" },\n\t\t\t\t\"username\": { \"type\": \"string\" }\n\t\t\t}\n\t\t}"
		},
		{
			"key": "schema_addition",
			"value": "{ \n\t\"type\": \"object\",\n\t\"properties\": {\n\t    \"id\": {\n            \"type\": \"string\"\n        },\n\t\t\"name\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"order\": { \n\t\t\t\"type\": \"number\"\n\t\t}\n\t},\n\t\"required\": [ \"name\" ],\n\t\"additionalProperties\": false\n}"
		},
		{
			"key": "schema_file",
			"value": "{ \n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"id\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"name\": { \n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"url\": {\n            \"type\": \"string\"\n        }\n\t},\n\t\"required\": [ \"id\", \"name\", \"url\" ],\n\t\"additionalProperties\": false\n}"
		},
		{
			"key": "schema_enrollment",
			"value": "{ \n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"id\": {\n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"name\": { \n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"comment\": { \n\t\t\t\"type\": \"string\"\n\t\t},\n\t\t\"driver\":  ##REPLACE_SCHEMA(schema_driver)##,\n\t\t\"passenger\": ##REPLACE_SCHEMA(schema_passenger)##,\n\t\t\"additions\": { \n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": ##REPLACE_SCHEMA(schema_addition)##\n\t\t},\n\t\t\"creator\": ##REPLACE_SCHEMA(schema_user_minified)##,\n\t\t\"iat\": { \n\t\t\t\"type\": \"string\",\n\t\t\t\"format\": \"date-time\"    \n\t\t},\n\t\t\"appointment\": {\n\t\t    \"type\": \"object\",\n\t\t    \"properties\": {\n\t\t        \"link\": { \"type\": \"string\" },\n\t\t        \"location\": { \"type\": \"string\" }\n\t\t    }\n\t\t}\n\t},\n\t\"required\": [ \"id\", \"iat\" ],\n\t\"additionalProperties\": false\n}"
		},
		{
			"key": "schema_driver",
			"value": "{ \n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"service\": { \n\t\t\t\"type\": \"number\"\n\t\t},\n\t\t\"seats\": { \n\t\t\t\"type\": \"number\"\n\t\t}\n\t},\n\t\"required\": [ \"service\", \"seats\"],\n\t\"additionalProperties\": false\n}"
		},
		{
			"key": "schema_passenger",
			"value": "{ \n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"requirement\": { \n\t\t\t\"type\": \"number\"\n\t\t}\n\t},\n\t\"required\": [ \"requirement\"],\n\t\"additionalProperties\": false\n}\n"
		},
		{
			"key": "schema_error",
			"value": "{\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"code\": { \"type\": \"string\"},\n\t\t\"message\": { \"type\": \"string\" },\n\t\t\"data\":  {\n\t\t\t\"anyOf\": [\n\t\t\t\t{ \n\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\"properties\": {\n\t\t\t\t\t    \"object\": { \"type\": \"string\" },\n\t\t\t\t\t\t\"attribute\": { \"type\": \"string\" },\n\t\t\t\t\t\t\"value\": { \"type\": \"string\" },\n\t\t\t\t\t\t\"in\": { \"type\": \"string\" },\n\t\t\t\t\t\t\"message\": { \"type\": \"string\" }\n\t\t\t\t\t},\n\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\"attribute\",\n\t\t\t\t\t\t\"value\"\n\t\t\t\t\t] \n\t\t\t\t},\n\t\t\t\t{ \"type\": \"string\" },\n\t\t\t\t{ \n\t\t\t\t\t\"type\": \"array\",\n\t\t\t\t\t\"items\": {\n\t\t\t\t\t\t\"anyOf\": [\n\t\t\t\t\t\t\t{ \"type\": \"object\" },\n\t\t\t\t\t\t\t{ \"type\": \"string\" }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\t\"required\": [\"code\", \"message\"],\n\t\"additionalProperties\": false\n}"
		},
		{
			"key": "bearer_getappointments",
			"value": ""
		},
		{
			"key": "bearer_getappointments_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_getappointments_filter",
			"value": ""
		},
		{
			"key": "bearer_getappointments_filter_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_createappointment",
			"value": ""
		},
		{
			"key": "bearer_createappointment_expiry_date",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_location_header",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_id",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_link",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_title",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_location",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_description",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_date",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_deadline",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_driverAddition",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_addition_1_name",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_creation_addition_2_name",
			"value": ""
		},
		{
			"key": "bearer_getappointment",
			"value": ""
		},
		{
			"key": "bearer_getappointment_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_getappointment-admin",
			"value": ""
		},
		{
			"key": "bearer_getappointment-admin_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_getappointment-enrollmentcreator",
			"value": ""
		},
		{
			"key": "bearer_getappointment-enrollmentcreator_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_getappointment-pinner",
			"value": ""
		},
		{
			"key": "bearer_getappointment-pinner_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_updateappointment",
			"value": ""
		},
		{
			"key": "bearer_updateappointment_expiry_date",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_location_header",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_title",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_description",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_location",
			"value": ""
		},
		{
			"key": "bearer_updateappointment-admin",
			"value": ""
		},
		{
			"key": "bearer_updateappointment-admin_expiry_date",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_link",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_link_original",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_link_header",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_link",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_addition_1_name",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_addition_2_name",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_1",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_2",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_location_header",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_id",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_1_name",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_2_name",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_3_name",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_4_name",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_5_name",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_6_name",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_1_id",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_2_id",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_3_id",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_4_id",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_5_id",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_update_addition_6_id",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_date",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_update_deadline",
			"value": ""
		},
		{
			"key": "RESET_appointment_update_link_header",
			"value": ""
		},
		{
			"key": "bearer_appointment_managementrelations",
			"value": ""
		},
		{
			"key": "bearer_appointment_managementrelations_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_appointment_managementrelations-admin",
			"value": ""
		},
		{
			"key": "bearer_appointment_managementrelations-admin_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_appointment_managementrelations-regularuser",
			"value": ""
		},
		{
			"key": "bearer_appointment_managementrelations-regularuser_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_managefiles",
			"value": ""
		},
		{
			"key": "bearer_managefiles_expiry_date",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_files_link",
			"value": ""
		},
		{
			"key": "bearer_managefiles-admin",
			"value": ""
		},
		{
			"key": "bearer_managefiles-admin_expiry_date",
			"value": ""
		},
		{
			"key": "PREPARATION_file_creation_id_1",
			"value": ""
		},
		{
			"key": "PREPARATION_file_creation_id_2",
			"value": ""
		},
		{
			"key": "bearer_manageadministrators",
			"value": ""
		},
		{
			"key": "bearer_manageadministrators_expiry_date",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_administrators_link",
			"value": ""
		},
		{
			"key": "VALIDATION_appointment_adminsitrators_administrator_username",
			"value": ""
		},
		{
			"key": "bearer_manageadministrators-admin",
			"value": ""
		},
		{
			"key": "bearer_manageadministrators-admin_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_pins",
			"value": ""
		},
		{
			"key": "bearer_pins_expiry_date",
			"value": ""
		},
		{
			"key": "PREPARATION_appointment_pins_link",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_location_header",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_id",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_token",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_name",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_appointment_link",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_comment",
			"value": ""
		},
		{
			"key": "bearer_createenrollment-enrollmentcreator",
			"value": ""
		},
		{
			"key": "bearer_createenrollment-enrollmentcreator_expiry_date",
			"value": ""
		},
		{
			"key": "PREPARATION_enrollment_creation_appointment_link",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_1_id",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_1_name",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_3_id",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_3_name",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_2_id",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_2_name",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_4_id",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_addition_4_name",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_driver_service",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_driver_seats",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_creation_passenger_requirement",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-enrollmentcreator",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-enrollmentcreator_expiry_date",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_update_location_header",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_update_comment",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-appointmentcreator",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-appointmentcreator_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-appointmentadmin",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-appointmentadmin_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-regularuser",
			"value": ""
		},
		{
			"key": "bearer_updateenrollment-regularuser_expiry_date",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_update_name",
			"value": ""
		},
		{
			"key": "PREPARATION_enrollment_creation_id",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_update_additions_addition_1_name",
			"value": ""
		},
		{
			"key": "VALIDATION_enrollment_update_additions_addition_2_name",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-appointmentcreator",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-appointmentcreator_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-appointmentadmin",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-appointmentadmi_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-enrollmentcreator",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-enrollmentcreator_expiry_date",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-regularuser",
			"value": ""
		},
		{
			"key": "bearer_enrollmentpermission-regularuser_expiry_date",
			"value": ""
		}
	]
}
